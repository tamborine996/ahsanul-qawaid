<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1A6B6B">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Ahsanul Qawaid</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-cream: #FDF8F3;
            --bg-warm: #F9F1E8;
            --teal-deep: #1A6B6B;
            --teal-light: #2A9D8F;
            --gold: #D4A853;
            --gold-light: #E8C97A;
            --coral: #E07A5F;
            --coral-soft: #F2A999;
            --navy: #264653;
            --text-dark: #2C3E50;
            --text-muted: #6B7C8A;
            --white: #FFFFFF;
            --shadow-soft: 0 4px 20px rgba(26, 107, 107, 0.1);
            --shadow-lifted: 0 8px 32px rgba(26, 107, 107, 0.15);
            --radius-soft: 16px;
            --radius-round: 24px;

            /* Harakat colors */
            --fatha-color: #E53935;
            --kasra-color: #43A047;
            --damma-color: #1E88E5;
            --sukoon-color: #8E24AA;
            --shadda-color: #F4511E;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-cream);
            color: var(--text-dark);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Geometric Pattern Background */
        .pattern-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
            background-image:
                radial-gradient(circle at 20% 80%, var(--gold-light) 1px, transparent 1px),
                radial-gradient(circle at 80% 20%, var(--teal-light) 1px, transparent 1px);
            background-size: 60px 60px, 80px 80px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--teal-deep) 0%, var(--teal-light) 100%);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-soft);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gold);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            color: var(--white);
        }

        .logo-text h1 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--white);
        }

        .header-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .shuffle-btn, .practice-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 20px;
            color: var(--white);
            font-family: 'Quicksand', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: all 0.3s ease;
        }

        .shuffle-btn:hover, .practice-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .shuffle-btn.active {
            background: var(--gold);
        }

        .practice-btn {
            background: var(--coral);
        }

        .practice-btn .count {
            background: var(--white);
            color: var(--coral);
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .practice-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Main Content */
        .main {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
            position: relative;
            z-index: 1;
        }

        /* Lesson Header */
        .lesson-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .lesson-header h2 {
            font-size: 1.5rem;
            color: var(--navy);
            margin-bottom: 0.25rem;
        }

        .lesson-header .arabic-title {
            font-family: 'Amiri', serif;
            font-size: 1.75rem;
            color: var(--teal-deep);
            margin-bottom: 0.5rem;
        }

        .lesson-header .description {
            color: var(--text-muted);
            font-size: 0.9rem;
            max-width: 500px;
            margin: 0 auto 0.75rem;
        }

        .lesson-header .kid-tip {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
            color: var(--navy);
            padding: 0.6rem 1.2rem;
            border-radius: var(--radius-soft);
            display: inline-block;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Symbol intro card */
        .symbol-card {
            background: linear-gradient(135deg, var(--teal-deep) 0%, var(--teal-light) 100%);
            color: var(--white);
            border-radius: var(--radius-soft);
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .symbol-card .symbol {
            font-family: 'Amiri', serif;
            font-size: 3rem;
            margin: 0.5rem 0;
        }

        .symbol-card .symbol .haraka-fatha { color: #FFCDD2; }
        .symbol-card .symbol .haraka-kasra { color: #C8E6C9; }
        .symbol-card .symbol .haraka-damma { color: #BBDEFB; }

        .symbol-card p {
            font-size: 0.9rem;
            opacity: 0.95;
        }

        /* Section headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--bg-warm);
        }

        .section-header h3 {
            font-size: 1rem;
            color: var(--navy);
        }

        .section-header .chunk-nav {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .chunk-nav button {
            background: var(--bg-warm);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .chunk-nav button:hover:not(:disabled) {
            background: var(--teal-light);
            color: white;
        }

        .chunk-nav button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Card Grid */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 0.75rem;
            direction: rtl;
        }

        .card-grid.exercise-grid {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }

        /* Individual Card */
        .card {
            background: var(--white);
            border-radius: var(--radius-soft);
            padding: 1rem 0.75rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--teal-light), var(--gold));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lifted);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:active {
            transform: scale(0.98);
        }

        /* Needs Practice State */
        .card.needs-practice {
            background: linear-gradient(135deg, #FFF5F3 0%, #FFEBE6 100%);
            border: 2px solid var(--coral);
        }

        .card.needs-practice::before {
            opacity: 1;
            background: linear-gradient(90deg, var(--coral), var(--coral-soft));
        }

        .card.needs-practice .practice-dot {
            display: block;
        }

        .practice-dot {
            display: none;
            position: absolute;
            top: 6px;
            right: 6px;
            width: 8px;
            height: 8px;
            background: var(--coral);
            border-radius: 50%;
        }

        /* Long Press Visual Feedback - Circular Progress Ring */
        .card.pressing {
            transform: scale(0.96);
        }

        .card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            border: 3px solid transparent;
            pointer-events: none;
        }

        .card.pressing::after {
            border-color: var(--coral);
            animation: ring-fill 0.5s linear forwards;
        }

        @keyframes ring-fill {
            0% { clip-path: polygon(50% 50%, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%); }
            12.5% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%); }
            25% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 50%, 100% 50%, 100% 50%); }
            37.5% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 100% 100%, 100% 100%); }
            50% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 50% 100%, 50% 100%); }
            62.5% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 50% 100%, 0% 100%); }
            75% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 50% 100%, 0% 100%, 0% 50%); }
            87.5% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 50% 100%, 0% 100%, 0% 50%, 0% 0%); }
            100% { clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 100% 100%, 50% 100%, 0% 100%, 0% 50%, 0% 0%, 50% 0%); }
        }

        /* Audio playing feedback */
        .card.playing {
            animation: audio-pulse 0.3s ease;
        }

        @keyframes audio-pulse {
            0% { box-shadow: var(--shadow-soft); }
            50% { box-shadow: 0 0 0 4px rgba(59, 148, 142, 0.3), var(--shadow-soft); }
            100% { box-shadow: var(--shadow-soft); }
        }

        /* Sound wave icon */
        .sound-wave {
            position: absolute;
            top: 4px;
            left: 4px;
            font-size: 0.7rem;
            opacity: 0.4;
            color: var(--teal);
        }

        .press-indicator {
            display: none; /* deprecated, using ring now */
        }

        /* Arabic text in cards */
        .arabic {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            color: var(--navy);
            line-height: 1.3;
            direction: rtl;
        }

        .card.exercise-card .arabic {
            font-size: 2rem;
        }

        .card.needs-practice .arabic {
            color: var(--coral);
        }

        /* Harakat coloring */
        .haraka-fatha { color: var(--fatha-color); }
        .haraka-kasra { color: var(--kasra-color); }
        .haraka-damma { color: var(--damma-color); }
        .haraka-sukoon { color: var(--sukoon-color); }
        .haraka-shadda { color: var(--shadda-color); }

        /* Transliteration (hidden by default) */
        .translit {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
            opacity: 0;
            transition: opacity 0.3s;
            height: 1.2em;
        }

        .card.show-translit .translit {
            opacity: 1;
        }

        /* ==================== */
        /* PRACTICE MODE        */
        /* ==================== */
        .practice-mode {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-cream);
            z-index: 200;
            display: none;
            flex-direction: column;
        }

        .practice-mode.active {
            display: flex;
        }

        .practice-header {
            background: linear-gradient(135deg, var(--coral) 0%, var(--coral-soft) 100%);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .practice-header h2 {
            font-size: 1.1rem;
        }

        .practice-progress {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .practice-exit {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            cursor: pointer;
        }

        .practice-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .practice-card {
            background: var(--white);
            border-radius: var(--radius-soft);
            padding: 3rem 4rem;
            text-align: center;
            box-shadow: var(--shadow-lifted);
            max-width: 90%;
            position: relative;
        }

        .practice-card .arabic {
            font-size: 5rem;
        }

        .practice-card .translit {
            font-size: 1.2rem;
            margin-top: 1rem;
            height: auto;
        }

        .practice-card .tap-hint {
            position: absolute;
            bottom: 1rem;
            left: 0;
            right: 0;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .practice-card-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .practice-action-btn {
            background: var(--bg-warm);
            border: 2px solid transparent;
            padding: 0.75rem 1.25rem;
            border-radius: 25px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .practice-action-btn:hover {
            transform: scale(1.05);
        }

        .practice-action-btn.speaker {
            background: var(--teal-light);
            color: white;
        }

        .practice-action-btn.speaker:hover {
            background: var(--teal-deep);
        }

        .practice-action-btn.reveal {
            background: var(--gold-light);
            color: var(--navy);
        }

        .practice-action-btn.reveal:hover {
            background: var(--gold);
        }

        .practice-action-btn.remove {
            background: white;
            color: var(--coral);
            border-color: var(--coral-soft);
        }

        .practice-action-btn.remove:hover {
            background: var(--coral-soft);
        }

        .practice-nav {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 1.5rem;
        }

        .practice-nav button {
            background: var(--teal-light);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .practice-nav button:hover {
            background: var(--teal-deep);
            transform: scale(1.1);
        }

        .practice-nav button:disabled {
            background: var(--text-muted);
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ==================== */
        /* LESSON COMPLETE      */
        /* ==================== */
        .lesson-complete-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 2rem auto;
            padding: 1rem;
            background: linear-gradient(135deg, var(--teal-deep) 0%, var(--teal-light) 100%);
            border: none;
            border-radius: var(--radius-round);
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lesson-complete-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lifted);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header-content {
                flex-wrap: wrap;
                gap: 0.75rem;
            }

            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
                gap: 0.5rem;
            }

            .card-grid.exercise-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .arabic {
                font-size: 2rem;
            }

            .card.exercise-card .arabic {
                font-size: 1.6rem;
            }

            .practice-card .arabic {
                font-size: 4rem;
            }

            .practice-card {
                padding: 2rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.3s ease-out backwards;
        }

        /* Stagger animation */
        .card:nth-child(1) { animation-delay: 0.02s; }
        .card:nth-child(2) { animation-delay: 0.04s; }
        .card:nth-child(3) { animation-delay: 0.06s; }
        .card:nth-child(4) { animation-delay: 0.08s; }
        .card:nth-child(5) { animation-delay: 0.10s; }
        .card:nth-child(6) { animation-delay: 0.12s; }
        .card:nth-child(7) { animation-delay: 0.14s; }
        .card:nth-child(8) { animation-delay: 0.16s; }

        /* ==================== */
        /* ONBOARDING OVERLAY   */
        /* ==================== */
        .onboarding-overlay {
            position: fixed;
            inset: 0;
            background: rgba(26, 107, 107, 0.95);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .onboarding-overlay.hidden {
            display: none;
        }

        .onboarding-card {
            background: white;
            border-radius: 24px;
            padding: 2.5rem 2rem;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: bounceIn 0.5s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .onboarding-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .onboarding-card h2 {
            color: var(--teal-deep);
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .onboarding-subtitle {
            color: var(--text-muted);
            margin-bottom: 2rem;
        }

        .onboarding-instructions {
            text-align: left;
            margin-bottom: 2rem;
        }

        .instruction {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--bg-warm);
            border-radius: 12px;
            margin-bottom: 0.75rem;
        }

        .instruction-icon {
            font-size: 1.5rem;
        }

        .onboarding-start {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: var(--navy);
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.25rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .onboarding-start:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(212, 168, 83, 0.4);
        }

        /* ==================== */
        /* CELEBRATION OVERLAY  */
        /* ==================== */
        .celebration-overlay {
            position: fixed;
            inset: 0;
            background: rgba(26, 107, 107, 0.9);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .celebration-overlay.show {
            display: flex;
        }

        .celebration-content {
            background: white;
            border-radius: 24px;
            padding: 3rem 2rem;
            text-align: center;
            animation: bounceIn 0.5s ease-out;
        }

        .celebration-stars {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .celebration-content h2 {
            color: var(--teal-deep);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .celebration-content p {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .celebration-btn {
            background: linear-gradient(135deg, var(--teal-deep) 0%, var(--teal-light) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
        }

        .confetti {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* ==================== */
        /* COMPACT LESSON NAV   */
        /* ==================== */
        .lesson-nav-compact {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.15);
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
        }

        .nav-arrow {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .nav-arrow:hover:not(:disabled) {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .nav-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .lesson-number {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            min-width: 50px;
            text-align: center;
        }

        .hamburger-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .hamburger-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* ==================== */
        /* SLIDE-OUT MENU       */
        /* ==================== */
        .menu-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 150;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .menu-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .lesson-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            max-width: 80vw;
            height: 100%;
            background: var(--white);
            z-index: 160;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(0,0,0,0.15);
        }

        .lesson-menu.open {
            transform: translateX(0);
        }

        .lesson-menu-header {
            background: linear-gradient(135deg, var(--teal-deep) 0%, var(--teal-light) 100%);
            color: white;
            padding: 1.25rem 1rem;
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-close {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lesson-menu-list {
            padding: 0.5rem 0;
        }

        .lesson-menu-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.95rem;
            color: var(--text-dark);
        }

        .lesson-menu-item:hover {
            background: var(--bg-warm);
        }

        .lesson-menu-item.active {
            background: linear-gradient(135deg, rgba(26, 107, 107, 0.1) 0%, rgba(42, 157, 143, 0.1) 100%);
            border-left: 3px solid var(--teal-deep);
            font-weight: 600;
        }

        .lesson-menu-item .lesson-num {
            width: 28px;
            height: 28px;
            background: var(--bg-warm);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.75rem;
            color: var(--text-muted);
        }

        .lesson-menu-item.active .lesson-num {
            background: var(--teal-deep);
            color: white;
        }

        .lesson-menu-item.completed .lesson-num {
            background: var(--teal-light);
            color: white;
        }

        .lesson-menu-item.completed .lesson-num::after {
            content: '\\2713';
        }

        .lesson-menu-item.completed:not(.active) .lesson-num {
            font-size: 0;
        }

        .lesson-menu-item.completed:not(.active) .lesson-num::after {
            font-size: 0.8rem;
        }

        .lesson-menu-item .lesson-name {
            flex: 1;
        }

        /* ==================== */
        /* CARD ICONS           */
        /* ==================== */
        .card-actions {
            position: absolute;
            top: 6px;
            left: 6px;
            right: 6px;
            display: flex;
            justify-content: space-between;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .card:hover .card-actions {
            opacity: 1;
        }

        .card-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, background 0.2s;
        }

        .card-icon:hover {
            transform: scale(1.15);
        }

        .card-icon.speaker {
            background: var(--teal-light);
            color: white;
        }

        .card-icon.speaker:hover {
            background: var(--teal-deep);
        }

        .card-icon.bookmark {
            background: var(--bg-warm);
            color: var(--text-muted);
        }

        .card-icon.bookmark:hover {
            background: var(--gold-light);
            color: var(--navy);
        }

        .card-icon.bookmark.active {
            background: var(--gold);
            color: var(--navy);
        }

        /* Remove old pressing ring animation */
        .card::after {
            display: none;
        }

        /* Progress bar in header */
        .progress-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            font-size: 0.85rem;
        }

        .progress-bar {
            width: 100px;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="pattern-bg"></div>

    <!-- Onboarding Overlay -->
    <div class="onboarding-overlay" id="onboarding">
        <div class="onboarding-card">
            <div class="onboarding-icon">üìñ</div>
            <h2>Welcome to Ahsanul Qawaid!</h2>
            <p class="onboarding-subtitle">Learn to read Arabic, one letter at a time</p>

            <div class="onboarding-instructions">
                <div class="instruction">
                    <span class="instruction-icon">üëÜ</span>
                    <span>Tap a card to see how it sounds</span>
                </div>
                <div class="instruction">
                    <span class="instruction-icon">üîä</span>
                    <span>Tap the speaker to hear it</span>
                </div>
                <div class="instruction">
                    <span class="instruction-icon">‚≠ê</span>
                    <span>Tap the star to save for practice</span>
                </div>
            </div>

            <button class="onboarding-start" id="startLearning">
                Let's Start! ‚ú®
            </button>
        </div>
    </div>

    <!-- Celebration Overlay -->
    <div class="celebration-overlay" id="celebration">
        <div class="celebration-content">
            <div class="celebration-stars">‚≠ê üåü ‚≠ê</div>
            <h2>Great Job!</h2>
            <p id="celebrationMessage">You completed this lesson!</p>
            <button class="celebration-btn" id="celebrationClose">Keep Going! üöÄ</button>
        </div>
        <div class="confetti" id="confetti"></div>
    </div>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ÿß</div>
                <div class="logo-text">
                    <h1>Ahsanul Qawaid</h1>
                </div>
            </div>
            <div class="lesson-nav-compact">
                <button class="nav-arrow" id="prevLesson" title="Previous lesson">&#9664;</button>
                <span class="lesson-number" id="lessonNumber">1 / 29</span>
                <button class="nav-arrow" id="nextLesson" title="Next lesson">&#9654;</button>
            </div>
            <div class="header-actions">
                <button class="shuffle-btn" id="shuffleBtn" title="Shuffle exercises">
                    <span>üîÄ</span> Shuffle
                </button>
                <button class="practice-btn" id="practiceBtn" disabled title="Practice marked items">
                    <span>Practice</span>
                    <span class="count" id="practiceCount">0</span>
                </button>
                <button class="hamburger-btn" id="menuToggle" title="All lessons">&#9776;</button>
            </div>
        </div>
    </header>

    <!-- Slide-out Lesson Menu -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <nav class="lesson-menu" id="lessonMenu">
        <div class="lesson-menu-header">
            <span>All Lessons</span>
            <button class="menu-close" id="menuClose">&#10005;</button>
        </div>
        <div class="lesson-menu-list" id="lessonMenuList"></div>
    </nav>

    <main class="main">
        <div id="lessonContent"></div>
    </main>

    <footer class="footer">
        <p>üîä = hear ¬∑ ‚≠ê = save for practice ¬∑ tap = see pronunciation</p>
    </footer>

    <!-- Practice Mode Overlay -->
    <div class="practice-mode" id="practiceMode">
        <div class="practice-header">
            <h2>Practice Mode</h2>
            <span class="practice-progress" id="practiceProgress">1 of 5</span>
            <button class="practice-exit" id="practiceExit">Done</button>
        </div>
        <div class="practice-content">
            <div class="practice-card" id="practiceCard">
                <div class="arabic" id="practiceArabic"></div>
                <div class="translit" id="practiceTranslit"></div>
                <div class="practice-card-actions">
                    <button class="practice-action-btn speaker" id="practiceSpeaker" title="Hear sound">üîä Hear</button>
                    <button class="practice-action-btn reveal" id="practiceReveal" title="Show transliteration">üëÅÔ∏è Show</button>
                    <button class="practice-action-btn remove" id="unmarkBtn" title="Remove from practice">‚úï Remove</button>
                </div>
            </div>
        </div>
        <div class="practice-nav">
            <button id="practicePrev">‚Üê</button>
            <button id="practiceNext">‚Üí</button>
        </div>
    </div>

    <script>
        // =====================================================
        // LESSON DATA - Complete Ahsanul Qawaid Book
        // =====================================================

        const arabicLetters = [
            { letter: 'ÿß', name: 'Alif', sound: '' },
            { letter: 'ÿ®', name: 'Ba', sound: 'b' },
            { letter: 'ÿ™', name: 'Ta', sound: 't' },
            { letter: 'ÿ´', name: 'Tha', sound: 'th' },
            { letter: 'ÿ¨', name: 'Jim', sound: 'j' },
            { letter: 'ÿ≠', name: 'Ha', sound: 'h' },
            { letter: 'ÿÆ', name: 'Kha', sound: 'kh' },
            { letter: 'ÿØ', name: 'Dal', sound: 'd' },
            { letter: 'ÿ∞', name: 'Dhal', sound: 'dh' },
            { letter: 'ÿ±', name: 'Ra', sound: 'r' },
            { letter: 'ÿ≤', name: 'Zay', sound: 'z' },
            { letter: 'ÿ≥', name: 'Sin', sound: 's' },
            { letter: 'ÿ¥', name: 'Shin', sound: 'sh' },
            { letter: 'ÿµ', name: 'Sad', sound: 's' },
            { letter: 'ÿ∂', name: 'Dad', sound: 'd' },
            { letter: 'ÿ∑', name: 'Ta', sound: 't' },
            { letter: 'ÿ∏', name: 'Dha', sound: 'dh' },
            { letter: 'ÿπ', name: 'Ayn', sound: '\'' },
            { letter: 'ÿ∫', name: 'Ghayn', sound: 'gh' },
            { letter: 'ŸÅ', name: 'Fa', sound: 'f' },
            { letter: 'ŸÇ', name: 'Qaf', sound: 'q' },
            { letter: 'ŸÉ', name: 'Kaf', sound: 'k' },
            { letter: 'ŸÑ', name: 'Lam', sound: 'l' },
            { letter: 'ŸÖ', name: 'Mim', sound: 'm' },
            { letter: 'ŸÜ', name: 'Nun', sound: 'n' },
            { letter: 'Ÿá', name: 'Ha', sound: 'h' },
            { letter: 'Ÿà', name: 'Waw', sound: 'w' },
            { letter: 'ÿ°', name: 'Hamza', sound: '\'' },
            { letter: 'Ÿä', name: 'Ya', sound: 'y' }
        ];

        const lessons = {
            1: {
                title: 'Arabic Alphabet',
                arabicTitle: 'ÿßŸÑÿ≠Ÿèÿ±ŸèŸàŸÅ ÿßŸÑÿπŸéÿ±Ÿéÿ®ŸêŸäŸéŸëÿ©',
                description: 'The 29 letters of the Arabic alphabet',
                kidTip: 'These are all the Arabic letters! Tap each one to see its name.',
                type: 'alphabet'
            },
            2: {
                title: 'Fatha',
                arabicTitle: 'ŸÅŸéÿ™Ÿíÿ≠Ÿéÿ©',
                symbol: 'ÿ®Ÿé',
                description: 'The "a" sound - a small line above the letter',
                kidTip: 'Like the "a" in "cat" - short and quick!',
                haraka: 'Ÿé',
                sound: 'a',
                type: 'haraka',
                exercises: [
                    { arabic: 'ÿ£ŸéŸÖŸéÿ±Ÿé', translit: 'amara' },
                    { arabic: 'ÿ®ŸéŸÑŸéÿ∫Ÿé', translit: 'balagha' },
                    { arabic: 'ÿ´ŸéŸÖŸéÿ±Ÿé', translit: 'thamara' },
                    { arabic: 'ÿ¨ŸéŸÖŸéÿπŸé', translit: 'jama\'a' },
                    { arabic: 'ÿ≠Ÿéÿ≥ŸéÿØŸé', translit: 'hasada' },
                    { arabic: 'ÿ∞ŸéŸÉŸéÿ±Ÿé', translit: 'dhakara' },
                    { arabic: 'ÿ±ŸéŸÅŸéÿπŸé', translit: 'rafa\'a' },
                    { arabic: 'ÿ≤ŸéÿπŸéŸÖŸé', translit: 'za\'ama' },
                    { arabic: 'ÿ≥Ÿéÿ±ŸéŸÇŸé', translit: 'saraqa' },
                    { arabic: 'ÿµŸéÿØŸéŸÇŸé', translit: 'sadaqa' },
                    { arabic: 'ÿ∂Ÿéÿ±Ÿéÿ®Ÿé', translit: 'daraba' },
                    { arabic: 'ÿ∏ŸéŸÑŸéŸÖŸé', translit: 'dhalama' },
                    { arabic: 'ÿπŸéÿØŸéŸÑŸé', translit: '\'adala' },
                    { arabic: 'ŸÇŸéŸÖŸéÿ±Ÿé', translit: 'qamara' },
                    { arabic: 'ŸÉŸéÿ≥Ÿéÿ®Ÿé', translit: 'kasaba' },
                    { arabic: 'ŸàŸéÿ¨ŸéÿØŸé', translit: 'wajada' }
                ]
            },
            3: {
                title: 'Kasra',
                arabicTitle: 'ŸÉŸéÿ≥Ÿíÿ±Ÿéÿ©',
                symbol: 'ÿ®Ÿê',
                description: 'The "i" sound - a small line below the letter',
                kidTip: 'Like the "i" in "sit" - short and quick!',
                haraka: 'Ÿê',
                sound: 'i',
                type: 'haraka',
                exercises: [
                    { arabic: 'ÿ£Ÿéÿ∞ŸêŸÜŸé', translit: 'adhina' },
                    { arabic: 'ÿ®ŸéŸÇŸêŸäŸé', translit: 'baqiya' },
                    { arabic: 'ÿ≠ŸéŸÖŸêÿØŸé', translit: 'hamida' },
                    { arabic: 'ÿÆŸéÿ¥ŸêŸäŸé', translit: 'khashiya' },
                    { arabic: 'ÿ≥ŸéÿÆŸêÿ±Ÿé', translit: 'sakhira' },
                    { arabic: 'ÿ¥Ÿéÿ±Ÿêÿ®Ÿé', translit: 'shariba' },
                    { arabic: 'ÿπŸéÿ¨Ÿêÿ®Ÿé', translit: '\'ajiba' },
                    { arabic: 'ÿ∫Ÿéÿ∂Ÿêÿ®Ÿé', translit: 'ghadiba' },
                    { arabic: 'ŸÉŸéÿ∞Ÿêÿ®Ÿé', translit: 'kadhiba' },
                    { arabic: 'ÿ®ŸéÿÆŸêŸÑŸé', translit: 'bakhila' },
                    { arabic: 'ŸÅŸéŸÑŸêŸÖŸé', translit: 'falima' },
                    { arabic: 'ŸäŸéÿ¶Ÿêÿ≥Ÿé', translit: 'ya\'isa' },
                    { arabic: 'ÿ®ŸêŸÑŸéÿßÿØŸç', translit: 'biladin' },
                    { arabic: 'ŸÖŸéŸÑŸêŸÉŸç', translit: 'malikin' },
                    { arabic: 'ÿ≠Ÿéÿ∑Ÿêÿ®Ÿé', translit: 'hatiba' },
                    { arabic: 'ŸÉŸéÿ®ŸêÿØŸé', translit: 'kabida' },
                    { arabic: 'ÿπŸéŸÑŸêŸÖŸé', translit: '\'alima' },
                    { arabic: 'ÿ•Ÿêÿ±ŸéŸÖŸé', translit: 'irama' }
                ]
            },
            4: {
                title: 'Damma',
                arabicTitle: 'ÿ∂ŸéŸÖŸéŸëÿ©',
                symbol: 'ÿ®Ÿè',
                description: 'The "u" sound - a small curl above the letter',
                kidTip: 'Like the "u" in "put" - round your lips!',
                haraka: 'Ÿè',
                sound: 'u',
                type: 'haraka',
                exercises: [
                    { arabic: 'ÿ¨ŸèÿπŸêŸÑŸé', translit: 'ju\'ila' },
                    { arabic: 'ÿÆŸèŸÑŸêŸÇŸé', translit: 'khuliqa' },
                    { arabic: 'ÿ∞ŸèŸÉŸêÿ±Ÿé', translit: 'dhukira' },
                    { arabic: 'ÿ≥Ÿèÿ¶ŸêŸÑŸé', translit: 'su\'ila' },
                    { arabic: 'ÿ∏ŸèŸÑŸêŸÖŸé', translit: 'dhulima' },
                    { arabic: 'ŸÖŸèŸÜŸêÿπŸé', translit: 'muni\'a' },
                    { arabic: 'ŸÑŸèÿπŸêŸÜŸé', translit: 'lu\'ina' },
                    { arabic: 'ŸáŸèÿØŸêŸäŸé', translit: 'hudiya' },
                    { arabic: 'ŸàŸèÿ¨ŸêÿØŸé', translit: 'wujida' },
                    { arabic: 'ÿ≥ŸèŸÇŸêÿ∑Ÿé', translit: 'suqita' },
                    { arabic: 'ÿ≠Ÿèÿ¥Ÿêÿ±Ÿé', translit: 'hushira' },
                    { arabic: 'ÿµŸèÿ≠ŸèŸÅŸç', translit: 'suhufin' },
                    { arabic: 'ÿ£Ÿèÿ∞ŸèŸÜŸå', translit: 'udhunun' },
                    { arabic: 'ÿ±Ÿèÿ®ŸèÿπŸé', translit: 'rubu\'a' },
                    { arabic: 'ŸäŸéÿ±Ÿêÿ´Ÿè', translit: 'yarithu' },
                    { arabic: 'ŸäŸéÿπŸêÿØŸè', translit: 'ya\'idu' }
                ]
            },
            5: {
                title: 'Fathatain',
                arabicTitle: 'ŸÅŸéÿ™Ÿíÿ≠Ÿéÿ™ŸéŸäŸíŸÜ',
                symbol: 'ÿ®Ÿãÿß',
                description: 'The "an" sound - double fatha, usually with alif',
                kidTip: 'Say "an" at the end - like "ban" without the "b"!',
                haraka: 'Ÿã',
                sound: 'an',
                type: 'tanween',
                exercises: [
                    { arabic: 'ÿ£Ÿéÿ®ŸéÿØŸãÿß', translit: 'abadan' },
                    { arabic: 'ÿ±Ÿéÿ∫ŸéÿØŸãÿß', translit: 'raghadan' },
                    { arabic: 'ÿ∑Ÿéÿ®ŸéŸÇŸãÿß', translit: 'tabaqan' },
                    { arabic: 'ÿ¨ŸéŸÜŸéŸÅŸãÿß', translit: 'janafan' },
                    { arabic: 'ŸÖŸéŸÑŸêŸÉŸãÿß', translit: 'malikan' },
                    { arabic: 'ŸÖŸéÿ´ŸéŸÑŸãÿß', translit: 'mathalan' },
                    { arabic: 'ÿπŸêŸÜŸéÿ®Ÿãÿß', translit: '\'inaban' },
                    { arabic: 'ŸÇŸéÿµŸéÿµŸãÿß', translit: 'qasasan' },
                    { arabic: 'ŸÑŸéÿπŸêÿ®Ÿãÿß', translit: 'la\'iban' },
                    { arabic: 'ÿ´ŸéŸÖŸéŸÜŸãÿß', translit: 'thamanan' },
                    { arabic: 'ÿ£Ÿéÿ≥ŸéŸÅŸãÿß', translit: 'asafan' },
                    { arabic: 'ŸÇŸéÿØŸéÿ±Ÿãÿß', translit: 'qadaran' },
                    { arabic: 'ŸÑŸéÿ®ŸéŸÜŸãÿß', translit: 'labanan' },
                    { arabic: 'ŸÉŸéÿ∞Ÿêÿ®Ÿãÿß', translit: 'kadhiban' },
                    { arabic: 'ÿ¥Ÿéÿ∑Ÿéÿ∑Ÿãÿß', translit: 'shatatan' },
                    { arabic: 'ÿ≥Ÿèÿ±Ÿèÿ±Ÿãÿß', translit: 'sururan' },
                    { arabic: 'ÿ±Ÿèÿ≥ŸèŸÑŸãÿß', translit: 'rusulan' },
                    { arabic: 'ÿπŸéŸÑŸéŸÇŸéÿ©Ÿã', translit: '\'alaqatan' },
                    { arabic: 'ÿ®ŸéŸÇŸéÿ±Ÿéÿ©Ÿã', translit: 'baqaratan' },
                    { arabic: 'ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã', translit: 'hasanatan' }
                ]
            },
            6: {
                title: 'Kasratain',
                arabicTitle: 'ŸÉŸéÿ≥Ÿíÿ±Ÿéÿ™ŸéŸäŸíŸÜ',
                symbol: 'ÿ®Ÿç',
                description: 'The "in" sound - double kasra below the letter',
                kidTip: 'Say "in" at the end - like "bin" without the "b"!',
                haraka: 'Ÿç',
                sound: 'in',
                type: 'tanween',
                exercises: [
                    { arabic: 'ÿπŸéŸÖŸéÿØŸç', translit: '\'amadin' },
                    { arabic: 'ÿ∑Ÿéÿ®ŸéŸÇŸç', translit: 'tabaqin' },
                    { arabic: 'ŸÉŸéÿ®ŸéÿØŸç', translit: 'kabadin' },
                    { arabic: 'ÿπŸéŸÑŸéŸÇŸç', translit: '\'alaqin' },
                    { arabic: 'ŸÖŸéÿ≥ŸéÿØŸç', translit: 'masadin' },
                    { arabic: 'ŸÑŸéŸáŸéÿ®Ÿç', translit: 'lahabin' },
                    { arabic: 'ÿ≥ŸéŸÜŸéÿ©Ÿç', translit: 'sanatin' },
                    { arabic: 'ŸÜŸéŸáŸéÿ±Ÿç', translit: 'naharin' },
                    { arabic: 'ÿ¥Ÿéÿ¨Ÿéÿ±Ÿç', translit: 'shajarin' },
                    { arabic: 'ÿ∫Ÿéÿ∂Ÿéÿ®Ÿç', translit: 'ghadabin' },
                    { arabic: 'ÿ≥Ÿêÿ≠Ÿíÿ±Ÿç', translit: 'sihrin' },
                    { arabic: 'ŸÉŸêÿ∞Ÿéÿ®Ÿç', translit: 'kidhabin' },
                    { arabic: 'ÿÆŸéÿ®Ÿéÿ±Ÿç', translit: 'khabarin' },
                    { arabic: 'ÿ®ŸéŸÑŸéÿßÿ∫Ÿç', translit: 'balaghin' },
                    { arabic: 'ÿ≠Ÿèÿ≤ŸíŸÜŸç', translit: 'huznin' },
                    { arabic: 'ÿ∞ŸêŸÉŸíÿ±Ÿç', translit: 'dhikrin' },
                    { arabic: 'ÿ´ŸéŸÖŸéÿ±Ÿéÿ©Ÿç', translit: 'thamaratin' },
                    { arabic: 'ÿ¨Ÿéÿ®ŸéŸÑŸç', translit: 'jabalin' }
                ]
            },
            7: {
                title: 'Dammatain',
                arabicTitle: 'ÿ∂ŸéŸÖŸéŸëÿ™ŸéŸäŸíŸÜ',
                symbol: 'ÿ®Ÿå',
                description: 'The "un" sound - double damma above the letter',
                kidTip: 'Say "un" at the end - like "bun" without the "b"!',
                haraka: 'Ÿå',
                sound: 'un',
                type: 'tanween',
                exercises: [
                    { arabic: 'ÿ≥Ÿèÿ±Ÿèÿ±Ÿå', translit: 'sururun' },
                    { arabic: 'ÿ£Ÿèÿ∞ŸèŸÜŸå', translit: 'udhunun' },
                    { arabic: 'ŸÉŸèÿ™Ÿèÿ®Ÿå', translit: 'kutubun' },
                    { arabic: 'ÿ±Ÿèÿ≥ŸèŸÑŸå', translit: 'rusulun' },
                    { arabic: 'ÿ±Ÿéÿ¨ŸèŸÑŸå', translit: 'rajulun' },
                    { arabic: 'ÿ¨ŸèÿØŸèÿØŸå', translit: 'jududun' },
                    { arabic: 'ÿ£Ÿéÿ≠ŸéÿØŸå', translit: 'ahadun' },
                    { arabic: 'ŸÇŸéÿ≥ŸéŸÖŸå', translit: 'qasamun' },
                    { arabic: 'ÿ®Ÿéÿ¥Ÿéÿ±Ÿå', translit: 'basharun' },
                    { arabic: 'ÿ≥ŸèŸÜŸéŸëÿ©Ÿå', translit: 'sunnatun' },
                    { arabic: 'ŸÖŸéÿ±Ÿéÿ∂Ÿå', translit: 'maradun' },
                    { arabic: 'ÿ≠Ÿéÿ±Ÿéÿ¨Ÿå', translit: 'harajun' },
                    { arabic: 'ŸÑŸéÿπŸêÿ®Ÿå', translit: 'la\'ibun' },
                    { arabic: 'ÿ≠Ÿèÿ±ŸèŸÖŸå', translit: 'hurumun' },
                    { arabic: 'ŸàŸéŸÑŸéÿØŸå', translit: 'waladun' },
                    { arabic: 'ŸÜŸéÿ¨Ÿíÿ≥Ÿå', translit: 'najsun' },
                    { arabic: 'ÿ∫Ÿèÿ®Ÿéÿ±Ÿéÿ©Ÿå', translit: 'ghubaratun' },
                    { arabic: 'ÿ®ŸéŸÇŸéÿ±Ÿéÿ©Ÿå', translit: 'baqaratun' }
                ]
            },
            8: {
                title: 'Madd with Alif',
                arabicTitle: 'ŸÖŸéÿØŸë ÿ®ŸêÿßŸÑÿ£ŸéŸÑŸêŸÅ',
                symbol: 'ÿ®Ÿéÿß',
                description: 'Stretching - when fatha comes before alif, stretch the "aa" sound',
                kidTip: 'Stretch it out like "baaaa" (like a sheep)!',
                type: 'madd',
                letters: arabicLetters.filter(l => l.letter !== 'ÿß').map(l => ({
                    arabic: l.letter + 'Ÿéÿß',
                    translit: l.name.toLowerCase() + 'aa'
                })),
                exercises: [
                    { arabic: 'ÿ∞Ÿéÿßÿ™Ÿé', translit: 'dhaata' },
                    { arabic: 'ÿÆŸéÿßŸÅŸé', translit: 'khaafa' },
                    { arabic: 'ŸÉŸéÿßŸÜŸé', translit: 'kaana' },
                    { arabic: 'ŸÇŸéÿßŸÑŸé', translit: 'qaala' },
                    { arabic: 'ÿ±ŸéÿßŸÜŸé', translit: 'raana' },
                    { arabic: 'ÿ™Ÿéÿßÿ®Ÿé', translit: 'taaba' },
                    { arabic: 'ÿπŸéÿßÿØŸé', translit: '\'aada' },
                    { arabic: 'ŸÜŸéÿßÿ±Ÿãÿß', translit: 'naaran' },
                    { arabic: 'ŸáŸéÿßÿØŸç', translit: 'haadin' },
                    { arabic: 'ŸÖŸéÿßŸÑŸêŸÉŸè', translit: 'maaliku' },
                    { arabic: 'ÿπŸéÿßŸÖŸç', translit: '\'aamin' },
                    { arabic: 'ÿ´ŸéŸàŸéÿßÿ®Ÿãÿß', translit: 'thawaaban' },
                    { arabic: 'ÿ¢ŸÅŸéÿßŸÇŸé', translit: 'aafaaqa' },
                    { arabic: 'ŸäŸéÿÆŸéÿßŸÅŸè', translit: 'yakhaafu' },
                    { arabic: 'ÿ£ŸéÿµŸéÿßÿ®Ÿé', translit: 'asaaba' },
                    { arabic: 'ÿ¨ŸèŸÜŸéÿßÿ≠Ÿé', translit: 'junaaha' },
                    { arabic: 'ÿ¨ŸéÿßÿπŸêŸÑŸå', translit: 'jaa\'ilun' },
                    { arabic: 'ÿÆŸéÿßŸÑŸêÿØŸãÿß', translit: 'khaalidan' },
                    { arabic: 'ŸÉŸéÿßÿ™Ÿêÿ®Ÿé', translit: 'kaatiba' },
                    { arabic: 'ÿπŸéÿßÿ®ŸêÿØŸè', translit: '\'aabidu' },
                    { arabic: 'ÿ≠ŸéÿßŸÅŸêÿ∏Ÿè', translit: 'haafidhu' },
                    { arabic: 'ŸÅŸéŸàŸéÿßŸÉŸêŸáŸé', translit: 'fawaakiha' }
                ]
            },
            9: {
                title: 'Standing Fatha',
                arabicTitle: 'ŸÅŸéÿ™Ÿíÿ≠Ÿéÿ© ŸÇŸéÿßÿ¶ŸêŸÖŸéÿ©',
                symbol: 'ÿ®Ÿ∞',
                description: 'A small alif above the letter - same "aa" sound as Madd with Alif',
                kidTip: 'See the tiny stick above? Stretch it like "baaaa"!',
                type: 'madd',
                exercises: [
                    { arabic: 'ÿßŸ∞ŸÑŸé', translit: 'aala' },
                    { arabic: 'ÿßŸ∞ÿØŸéŸÖŸé', translit: 'aadama' },
                    { arabic: 'ÿßŸ∞ŸÖŸéŸÜŸé', translit: 'aamana' },
                    { arabic: 'ÿ∞Ÿ∞ŸÑŸêŸÉŸé', translit: 'dhaalika' },
                    { arabic: 'ÿßŸ∞ÿ´Ÿéÿ±Ÿé', translit: 'aathara' },
                    { arabic: 'ÿßŸ∞ÿÆŸéÿ±Ÿé', translit: 'aakhara' },
                    { arabic: 'ÿ≥ŸéŸÑŸ∞ŸÖŸå', translit: 'salaamun' },
                    { arabic: 'ÿ≠Ÿ∞ŸÑŸãÿß', translit: 'haalan' },
                    { arabic: 'ŸÖŸéÿßŸ∞ÿ®Ÿãÿß', translit: 'ma\'aaban' },
                    { arabic: 'ŸÉŸêÿ™Ÿ∞ÿ®Ÿå', translit: 'kitaabun' },
                    { arabic: 'ÿßŸ∞ŸäŸéÿ©Ÿå', translit: 'aayatun' },
                    { arabic: 'ÿÆŸéŸÑŸ∞ÿ¶ŸêŸÉŸé', translit: 'khalaa\'ika' },
                    { arabic: 'ÿ±Ÿêÿ≥Ÿ∞ŸÑŸéÿ™Ÿç', translit: 'risaalatin' },
                    { arabic: 'ŸÉŸéŸÑŸêŸÖŸ∞ÿ™Ÿç', translit: 'kalimaatin' },
                    { arabic: 'ŸÇŸ∞ŸÜŸêÿ™Ÿéÿ™Ÿí', translit: 'qaanitatun' },
                    { arabic: 'ÿ≠Ÿ∞ŸÅŸêÿ∏Ÿ∞ÿ™Ÿè', translit: 'haafidhaatu' },
                    { arabic: 'ÿ≥ŸéŸÖŸ∞ŸàŸ∞ÿ™Ÿç', translit: 'samaawaatin' }
                ]
            },
            10: {
                title: 'Standing Kasra & Inverted Damma',
                arabicTitle: 'ŸÉŸéÿ≥Ÿíÿ±Ÿéÿ© ŸÇŸéÿßÿ¶ŸêŸÖŸéÿ© ŸàŸé ÿ∂ŸéŸÖŸéŸëÿ© ŸÖŸéŸÇŸíŸÑŸèŸàÿ®Ÿéÿ©',
                symbol: 'ÿ®ŸêŸä / ÿ®ŸèŸà',
                description: 'Standing kasra (Ÿâ) = "ee" sound. Inverted damma (€•) = "oo" sound.',
                kidTip: 'Tiny ya below = "ee". Tiny waw above = "oo"!',
                type: 'madd',
                letters: [
                    { arabic: 'ÿßŸê', translit: 'ii' },
                    { arabic: 'ÿ°Ÿê', translit: 'ii' },
                    { arabic: 'ŸäŸê', translit: 'yii' },
                    { arabic: 'ÿß€§', translit: 'ii' },
                    { arabic: 'ÿ°€§', translit: 'ii' },
                    { arabic: 'Ÿä€§', translit: 'yii' },
                    { arabic: 'ŸàŸè', translit: 'uu' },
                    { arabic: 'ÿ°Ÿè', translit: 'uu' },
                    { arabic: 'Ÿ±Ÿè', translit: 'uu' },
                    { arabic: 'ŸàŸó', translit: 'uu' },
                    { arabic: 'ÿ°Ÿó', translit: 'uu' },
                    { arabic: 'Ÿ±Ÿó', translit: 'uu' }
                ],
                exercises: [
                    { arabic: 'ÿ•ŸêŸÑŸ∞ŸáŸå', translit: 'ilaahun' },
                    { arabic: 'ŸáŸ∞ÿ∞ŸêŸáŸê', translit: 'haadhihi' },
                    { arabic: 'ÿßŸ∞ŸäŸ∞ÿ™ŸêŸáŸê', translit: 'aayaatihi' },
                    { arabic: 'ÿ®ŸêŸäŸéÿØŸêŸáŸê', translit: 'biyadihi' },
                    { arabic: 'ÿµŸéÿßÿ≠Ÿêÿ®Ÿéÿ™ŸêŸáŸê', translit: 'saahibatihi' },
                    { arabic: 'ŸäŸéÿ±Ÿ∞ŸáŸè', translit: 'yaraahu' },
                    { arabic: 'ŸàŸéÿ±ŸêŸäŸé', translit: 'wariya' },
                    { arabic: 'ŸÉŸêÿ™Ÿ∞ÿ®ŸéŸáŸè', translit: 'kitaabahu' },
                    { arabic: 'ÿ∫ŸéÿßŸàŸèŸÜŸé', translit: 'ghaawuna' },
                    { arabic: 'ÿØŸéÿßŸàŸèÿØŸé', translit: 'daawuda' }
                ]
            },
            11: {
                title: 'Sukoon',
                arabicTitle: 'ÿ≥ŸèŸÉŸèŸàŸÜ',
                symbol: 'ÿ®Ÿí',
                description: 'A small circle above - the letter has no vowel, just its sound',
                kidTip: 'See the tiny circle? Stop the sound short - no "a", "i", or "u"!',
                haraka: 'Ÿí',
                type: 'sukoon',
                letters: arabicLetters.map(l => ({
                    arabic: 'ÿßŸé' + l.letter + 'Ÿí',
                    translit: 'a' + l.name.toLowerCase().charAt(0)
                })),
                exercises: [
                    { arabic: 'ÿ£ŸéŸàŸíŸáŸéŸÜŸé', translit: 'awhana' },
                    { arabic: 'ÿ™ŸéŸàŸíÿ®Ÿéÿ©Ÿã', translit: 'tawbatan' },
                    { arabic: 'ÿ≠ŸéŸàŸíŸÑŸéŸáŸè', translit: 'hawlahu' },
                    { arabic: 'ÿÆŸéŸàŸíŸÅŸç', translit: 'khawfin' },
                    { arabic: 'ÿ±ŸéŸàŸíÿ≠Ÿå', translit: 'rawhun' },
                    { arabic: 'ÿ≤ŸéŸàŸíÿ¨Ÿãÿß', translit: 'zawjan' },
                    { arabic: 'ÿ≥ŸéŸàŸíŸÅŸé', translit: 'sawfa' },
                    { arabic: 'ÿ∫ŸéŸàŸíÿ±Ÿãÿß', translit: 'ghawran' },
                    { arabic: 'ŸÅŸéŸàŸíÿ™Ÿé', translit: 'fawta' },
                    { arabic: 'ŸÉŸéŸàŸíÿ´Ÿéÿ±Ÿé', translit: 'kawthara' },
                    { arabic: 'ŸÑŸéŸàŸíŸÖŸéÿ©Ÿé', translit: 'lawmata' },
                    { arabic: 'ŸÖŸéŸàŸíÿ™ŸêŸáŸéÿß', translit: 'mawtihaa' },
                    { arabic: 'ŸÜŸéŸàŸíŸÖŸå', translit: 'nawmun' },
                    { arabic: 'ŸäŸéŸàŸíŸÖŸé', translit: 'yawma' },
                    { arabic: 'ŸäŸéŸàŸíŸÖŸêÿ¶Ÿêÿ∞Ÿç', translit: 'yawma\'idhin' },
                    { arabic: 'ÿ£ŸéŸàŸíÿ™ŸéÿßÿØŸãÿß', translit: 'awtaadan' },
                    { arabic: 'ÿ≥ŸéŸàŸíÿ∑Ÿé', translit: 'sawta' },
                    { arabic: 'ŸÇŸéŸàŸíŸÑŸé', translit: 'qawla' },
                    { arabic: 'ŸÑŸéŸàŸíÿ≠Ÿç', translit: 'lawhin' },
                    { arabic: 'ÿµŸéŸàŸíŸÖŸãÿß', translit: 'sawman' }
                ]
            },
            12: {
                title: 'Madd with Waw',
                arabicTitle: 'ŸÖŸéÿØŸë ÿ®ŸêÿßŸÑŸàŸéÿßŸà',
                symbol: 'ÿ®ŸèŸà',
                description: 'When damma comes before waw with sukoon, stretch the "oo" sound',
                kidTip: 'Round your lips and stretch: "boooo"!',
                type: 'madd',
                letters: arabicLetters.filter(l => l.letter !== 'Ÿà').map(l => ({
                    arabic: l.letter + 'ŸèŸàŸí',
                    translit: l.name.toLowerCase() + 'oo'
                })),
                exercises: [
                    { arabic: 'ÿ£ŸèŸàÿ™ŸêŸäŸé', translit: 'ootiya' },
                    { arabic: 'ÿ®ŸèŸàÿ±ŸêŸÉŸé', translit: 'boorika' },
                    { arabic: 'ÿ™ŸèŸàÿ±ŸèŸàŸÜŸé', translit: 'tooroona' },
                    { arabic: 'ŸàŸèÿ¨ŸèŸàŸáŸè', translit: 'wujoohu' },
                    { arabic: 'ÿ≠ŸèŸàÿ±Ÿå', translit: 'hoorun' },
                    { arabic: 'ÿØŸéŸàŸíŸÑŸéÿ©Ÿã', translit: 'dawlatan' },
                    { arabic: 'ÿ≤ŸèŸàÿ±Ÿãÿß', translit: 'zooran' },
                    { arabic: 'ŸäŸéÿ≥ŸèŸàŸÖŸèŸàŸÜŸé', translit: 'yasoomona' },
                    { arabic: 'ÿµŸèŸàÿ±Ÿç', translit: 'soorin' },
                    { arabic: 'ŸäŸéŸÇŸèŸàŸÑŸèŸàŸÜŸé', translit: 'yaqooloona' },
                    { arabic: 'ŸÜŸèŸàÿ≠Ÿå', translit: 'noohun' },
                    { arabic: 'ŸÇŸèŸÑŸèŸàÿ®Ÿé', translit: 'qulooba' },
                    { arabic: 'ÿ¥ŸèŸáŸèŸàÿØŸå', translit: 'shuhoodun' },
                    { arabic: 'ŸÇŸèÿπŸèŸàÿØŸå', translit: 'qu\'oodun' },
                    { arabic: 'ÿ´Ÿèÿ®ŸèŸàÿ±Ÿãÿß', translit: 'thubooran' }
                ]
            },
            13: {
                title: 'Leen Letters',
                arabicTitle: 'ÿ≠Ÿèÿ±ŸèŸàŸÅ ÿßŸÑŸÑŸêŸëŸäŸÜ',
                symbol: 'ŸäŸí / ŸàŸí',
                description: 'Ya or Waw with sukoon after fatha - makes a soft "ay" or "aw" sound',
                kidTip: 'These make sounds like "ay" in "day" or "ow" in "how"!',
                type: 'leen',
                letters: arabicLetters.map(l => ({
                    arabic: l.letter + 'ŸéŸäŸí',
                    translit: l.name.toLowerCase() + 'ay'
                })),
                exercises: [
                    { arabic: 'ÿ£ŸéŸäŸíŸÜŸé', translit: 'ayna' },
                    { arabic: 'ÿ®ŸéŸäŸíÿ™Ÿå', translit: 'baytun' },
                    { arabic: 'ÿßŸ∞ÿ™ŸéŸäŸíŸÜŸéÿß', translit: 'aataynaa' },
                    { arabic: 'ÿ≠ŸéŸäŸíÿ´Ÿè', translit: 'haythu' },
                    { arabic: 'ÿÆŸéŸäŸíÿ±Ÿå', translit: 'khayrun' },
                    { arabic: 'ÿ®ŸêÿØŸéŸäŸíŸÜŸç', translit: 'bidaynin' },
                    { arabic: 'ŸÇŸèÿ±ŸéŸäŸíÿ¥Ÿç', translit: 'qurayshin' },
                    { arabic: 'ÿ≤ŸéŸäŸíÿ™ŸèŸàŸÜŸç', translit: 'zaytoonin' },
                    { arabic: 'ÿ¥ŸéŸäŸíÿ°Ÿå', translit: 'shay\'un' },
                    { arabic: 'ÿµŸéŸäŸíŸÅŸç', translit: 'sayfin' },
                    { arabic: 'ÿ∂ŸéŸäŸíŸÅŸé', translit: 'dayfa' },
                    { arabic: 'ÿ∑ŸéŸäŸíÿ±Ÿé', translit: 'tayra' },
                    { arabic: 'ÿπŸéŸäŸíŸÜŸå', translit: '\'aynun' },
                    { arabic: 'ÿ∫ŸéŸäŸíÿ±Ÿê', translit: 'ghayri' },
                    { arabic: 'ŸÉŸéŸäŸíÿØŸãÿß', translit: 'kaydan' },
                    { arabic: 'ŸàŸéŸäŸíŸÑŸå', translit: 'waylun' },
                    { arabic: 'ŸáŸéÿØŸéŸäŸíŸÜŸéÿß', translit: 'hadaynaa' },
                    { arabic: 'ŸÑŸéŸäŸíÿ≥Ÿé', translit: 'laysa' }
                ]
            },
            14: {
                title: 'Madd with Ya',
                arabicTitle: 'ŸÖŸéÿØŸë ÿ®ŸêÿßŸÑŸäŸéÿßÿ°',
                symbol: 'ÿ®ŸêŸä',
                description: 'When kasra comes before ya with sukoon, stretch the "ee" sound',
                kidTip: 'Smile and stretch: "beeee"!',
                type: 'madd',
                letters: arabicLetters.filter(l => l.letter !== 'Ÿä').map(l => ({
                    arabic: l.letter + 'ŸêŸäŸí',
                    translit: l.name.toLowerCase() + 'ee'
                })),
                exercises: [
                    { arabic: 'ÿ•ŸêŸäÿ™ŸèŸàŸÜŸêŸä', translit: 'eetoonee' },
                    { arabic: 'ŸÖŸèÿ®ŸêŸäŸÜŸç', translit: 'mubeenin' },
                    { arabic: 'ŸäŸéÿ™ŸêŸäŸÖŸãÿß', translit: 'yateeman' },
                    { arabic: 'ŸÉŸéÿ´ŸêŸäÿ±Ÿãÿß', translit: 'katheeran' },
                    { arabic: 'ŸÖŸéÿ¨ŸêŸäÿØŸå', translit: 'majeedun' },
                    { arabic: 'ŸÖŸèÿ≠ŸêŸäÿ∑Ÿå', translit: 'muheetun' },
                    { arabic: 'ÿßŸ∞ÿÆŸêŸäŸáŸê', translit: 'aakheehi' },
                    { arabic: 'ŸÜŸéÿ∞ŸêŸäÿ±Ÿå', translit: 'nadheerun' },
                    { arabic: 'ŸÉŸéÿ±ŸêŸäŸÖŸå', translit: 'kareemun' },
                    { arabic: 'ŸÜŸèÿ¨Ÿéÿ≤ŸêŸäŸé', translit: 'nujaziya' },
                    { arabic: 'ŸäŸéÿ≥ŸêŸäÿ±Ÿãÿß', translit: 'yaseeran' },
                    { arabic: 'ÿ®ŸéÿµŸêŸäÿ±Ÿãÿß', translit: 'baseeran' },
                    { arabic: 'ŸÑŸéÿ∑ŸêŸäŸÅŸå', translit: 'lateefun' },
                    { arabic: 'ÿπŸéÿ∏ŸêŸäŸÖŸå', translit: '\'adheemun' },
                    { arabic: 'ÿπŸéŸÑŸêŸäŸÖŸå', translit: '\'aleemun' },
                    { arabic: 'ÿ¥ŸéŸáŸêŸäÿØŸå', translit: 'shaheedun' },
                    { arabic: 'ŸÑŸêÿ®Ÿêÿ´ŸêŸäŸÜŸé', translit: 'libitheena' }
                ]
            },
            15: {
                title: 'Sukoon Combinations',
                arabicTitle: 'ÿ™ŸéŸÖŸéÿßÿ±ŸêŸäŸÜ ÿßŸÑÿ≥ŸèŸëŸÉŸèŸàŸÜ',
                symbol: 'ÿßŸéŸÜŸí',
                description: 'Practice reading two-letter combinations with sukoon',
                kidTip: 'Read the first letter, then quickly add the sukoon letter!',
                type: 'sukoon',
                exercises: [
                    { arabic: 'ÿßŸéŸÜŸí', translit: 'an' },
                    { arabic: 'ÿ•Ÿêÿ∞Ÿí', translit: 'idh' },
                    { arabic: 'ÿßŸéŸÖŸí', translit: 'am' },
                    { arabic: 'ÿ•ŸêŸÜŸí', translit: 'in' },
                    { arabic: 'ÿ®ŸéŸÑŸí', translit: 'bal' },
                    { arabic: 'ÿ™Ÿèÿ®Ÿí', translit: 'tub' },
                    { arabic: 'ÿÆŸèÿ∞Ÿí', translit: 'khudh' },
                    { arabic: 'ÿØŸéÿπŸí', translit: 'da\'' },
                    { arabic: 'ÿ∞ŸèŸÇŸí', translit: 'dhuq' },
                    { arabic: 'ÿ≥ŸéŸÑŸí', translit: 'sal' },
                    { arabic: 'ŸÇŸéÿØŸí', translit: 'qad' },
                    { arabic: 'ŸÇŸèŸÑŸí', translit: 'qul' },
                    { arabic: 'ŸÇŸèŸÖŸí', translit: 'qum' },
                    { arabic: 'ŸÉŸéŸÖŸí', translit: 'kam' },
                    { arabic: 'ŸÉŸèŸÜŸí', translit: 'kun' },
                    { arabic: 'ŸÑŸéŸÖŸí', translit: 'lam' },
                    { arabic: 'ŸÑŸéŸÜŸí', translit: 'lan' },
                    { arabic: 'ŸÖŸéŸÜŸí', translit: 'man' },
                    { arabic: 'ŸÖŸêŸÜŸí', translit: 'min' },
                    { arabic: 'ŸáŸéÿ®Ÿí', translit: 'hab' },
                    { arabic: 'ÿ•ŸêÿØŸíŸÅŸéÿπŸí', translit: 'idfa\'' },
                    { arabic: 'ÿ•Ÿêÿ∞ŸíŸáŸéÿ®Ÿí', translit: 'idhhab' },
                    { arabic: 'ÿßŸêŸÜŸíÿ≤ŸêŸÑŸí', translit: 'inzil' },
                    { arabic: 'ÿßŸéŸÖŸíŸáŸêŸÑŸí', translit: 'amhil' },
                    { arabic: 'ÿßŸéŸÑŸíŸÇŸéÿ™Ÿí', translit: 'alqat' },
                    { arabic: 'ÿ£Ÿéÿ≠Ÿíÿ≥ŸêŸÜŸí', translit: 'ahsin' }
                ]
            },
            16: {
                title: 'Silent Letters',
                arabicTitle: 'ÿ≠Ÿèÿ±ŸèŸàŸÅ ÿ∫ŸéŸäŸíÿ± ŸÖŸéŸÜŸíÿ∑ŸèŸàŸÇŸéÿ©',
                symbol: 'ÿπŸéŸÑŸéŸâ',
                description: 'Some letters are written but not pronounced - like the alif at the end',
                kidTip: 'See an alif at the end with no mark? Skip it!',
                type: 'silent',
                exercises: [
                    { arabic: 'ÿπŸéŸÑŸéŸâ', translit: '\'alaa' },
                    { arabic: 'ÿ•ŸêŸÑŸéŸâ', translit: 'ilaa' },
                    { arabic: 'ÿßŸèŸàŸíŸÑŸéŸâ', translit: 'oolaa' },
                    { arabic: 'ŸÇŸéŸáŸíÿØŸéŸâ', translit: 'qahdaa' },
                    { arabic: 'ÿ£Ÿéÿ∫ŸíŸÜŸéŸâ', translit: 'aghnaa' },
                    { arabic: 'ŸäŸéÿ≠ŸíŸäŸéŸâ', translit: 'yahyaa' },
                    { arabic: 'ÿ™Ÿéÿ±Ÿíÿ∂ŸéŸâ', translit: 'tardaa' },
                    { arabic: 'ŸÖŸêÿßÿ¶Ÿéÿ©Ÿã ŸàŸéÿßŸÜŸãÿß', translit: 'mi\'atan wa anan' },
                    { arabic: 'ŸÖŸêŸÜŸé ÿßŸÑŸíÿßŸèŸàŸíŸÑŸéŸâ', translit: 'minal oolaa' },
                    { arabic: 'ÿ±Ÿéÿ∂ŸèŸàÿß', translit: 'radoo' },
                    { arabic: 'ÿ£ŸéŸÖŸéŸÜŸèŸàÿß', translit: 'aamanoo' },
                    { arabic: 'ŸÖŸéÿßŸÑŸíŸÇŸéÿßÿ±ŸêÿπŸéÿ©Ÿè', translit: 'maal qaari\'atu' },
                    { arabic: 'ÿ™Ÿéÿßÿ®Ÿéÿß', translit: 'taabaa' },
                    { arabic: 'ŸÇŸéÿßŸÑŸéÿß', translit: 'qaalaa' },
                    { arabic: 'ŸÉŸéŸÑŸéŸëÿß', translit: 'kallaa' },
                    { arabic: 'ŸÑŸêŸäŸéŸÉŸèŸàŸÜŸéÿß', translit: 'liyakoonaa' },
                    { arabic: 'ŸÅŸéŸÇŸèŸàŸíŸÑŸéÿß', translit: 'faqoolaa' },
                    { arabic: 'ÿ•Ÿêÿ∞ŸíŸáŸéÿ®Ÿéÿß', translit: 'idh-habaa' },
                    { arabic: 'ÿ¥Ÿêÿ¶Ÿíÿ™ŸèŸÖŸéÿß', translit: 'shi\'tumaa' },
                    { arabic: 'ŸÅŸéŸÑŸéÿß ÿ™ŸéŸÇŸíÿ±Ÿéÿ®Ÿéÿß', translit: 'falaa taqrabaa' },
                    { arabic: 'ÿ£Ÿéÿ∑ŸéÿßÿπŸèŸàŸíŸÜŸéÿß', translit: 'ataa\'oonaa' }
                ]
            },
            17: {
                title: 'Hamzah with Sukoon',
                arabicTitle: 'ŸáŸéŸÖŸíÿ≤Ÿéÿ© ÿ≥ŸéÿßŸÉŸêŸÜŸéÿ©',
                symbol: 'ÿ£Ÿí',
                description: 'Hamzah (ÿ°) with sukoon makes a hiccup/glottal stop sound',
                kidTip: 'Make a tiny hiccup sound in your throat!',
                type: 'hamza',
                exercises: [
                    { arabic: 'ŸäŸéÿ£Ÿíÿ™ŸêŸäŸÉŸèŸÖŸí', translit: 'ya\'teekum' },
                    { arabic: 'ŸàŸéÿ£ŸíŸÖŸèÿ±Ÿí', translit: 'wa\'mur' },
                    { arabic: 'ÿ™Ÿéÿ£Ÿíÿ™ŸêŸäŸáŸêŸÖŸí', translit: 'ta\'teehim' },
                    { arabic: 'ŸÖŸéÿ£ŸíŸàŸéÿßŸáŸèŸÖŸí', translit: 'ma\'waahum' },
                    { arabic: 'ŸÉŸéÿ£Ÿíÿ≥Ÿãÿß', translit: 'ka\'san' },
                    { arabic: 'ŸäŸéÿ£Ÿíÿ®Ÿé', translit: 'ya\'ba' },
                    { arabic: 'ŸÜŸéÿ£Ÿíÿ™Ÿê', translit: 'na\'ti' },
                    { arabic: 'ŸÇŸéÿ±Ÿéÿ£Ÿíÿ™Ÿé', translit: 'qara\'ta' },
                    { arabic: 'ÿ®Ÿéÿ£Ÿíÿ≥Ÿç', translit: 'ba\'sin' },
                    { arabic: 'ŸÖŸéÿ£ŸíŸÉŸèŸàŸíŸÑŸç', translit: 'ma\'koolin' },
                    { arabic: 'ŸÖŸèÿ§ŸíÿµŸéÿØŸéÿ©Ÿå', translit: 'mu\'sadatun' },
                    { arabic: 'ÿ¥Ÿéÿ£ŸíŸÜŸå', translit: 'sha\'nun' },
                    { arabic: 'ŸäŸéÿ£ŸíŸÖŸèÿ±ŸèŸÉŸèŸÖŸí', translit: 'ya\'murukum' },
                    { arabic: 'ŸäŸèÿ§ŸíŸÖŸêŸÜŸí', translit: 'yu\'min' },
                    { arabic: 'ÿ™Ÿèÿ§Ÿíÿ´Ÿêÿ±ŸèŸàŸÜŸé', translit: 'tu\'thiroon' },
                    { arabic: 'ÿ™Ÿéÿ£ŸíŸÉŸèŸÑŸèŸàŸÜŸé', translit: 'ta\'kuloon' },
                    { arabic: 'ŸäŸèÿ§Ÿíÿ™ŸèŸàŸÜŸé', translit: 'yu\'toon' }
                ]
            },
            18: {
                title: 'Shaddah',
                arabicTitle: 'ÿ¥ŸéÿØŸéŸëÿ©',
                symbol: 'ÿ®ŸéŸë',
                description: 'A "w" shape above - double the letter (say it twice, merged together)',
                kidTip: 'Press down harder and hold the letter longer!',
                haraka: 'Ÿë',
                type: 'shadda',
                exercises: [
                    { arabic: 'ÿ±Ÿéÿ®ŸéŸë', translit: 'rabba' },
                    { arabic: 'ÿ•ŸêŸÜŸéŸë', translit: 'inna' },
                    { arabic: 'ÿ´ŸèŸÖŸéŸë', translit: 'thumma' },
                    { arabic: 'ÿπŸéŸÖŸéŸë', translit: '\'amma' },
                    { arabic: 'ŸÖŸéŸÜŸéŸë', translit: 'manna' },
                    { arabic: 'ŸÖŸéÿØŸéŸë', translit: 'madda' },
                    { arabic: 'ŸÇŸéŸÑŸéŸë', translit: 'qalla' },
                    { arabic: 'ÿ≠Ÿéÿ¨ŸéŸë', translit: 'hajja' },
                    { arabic: 'ÿ£ŸéŸÜŸéŸë', translit: 'anna' },
                    { arabic: 'ÿ¥Ÿéÿ±ŸçŸë', translit: 'sharrin' },
                    { arabic: 'ÿµŸéŸÑŸêŸë', translit: 'salli' },
                    { arabic: 'ÿ™Ÿéÿ®ŸéŸë', translit: 'tabba' },
                    { arabic: 'ÿ∏ŸéŸÜŸéŸë', translit: 'dhanna' },
                    { arabic: 'ÿµŸéÿ®ŸéŸë', translit: 'sabba' },
                    { arabic: 'ŸÖŸéŸÖŸéŸë', translit: 'mamma' },
                    { arabic: 'ÿ≠Ÿèÿ®ŸéŸëÿß', translit: 'hubban' },
                    { arabic: 'ÿ¨ŸéŸÖŸéŸëÿß', translit: 'jamman' },
                    { arabic: 'ÿØŸêŸÉŸãŸëÿß', translit: 'dikkan' },
                    { arabic: 'ÿ¥ŸéŸÇŸãŸëÿß', translit: 'shaqqan' },
                    { arabic: 'ÿµŸéŸÅŸãŸëÿß', translit: 'saffan' },
                    { arabic: 'ÿ≠ŸéŸÇŸãŸëÿß', translit: 'haqqan' },
                    { arabic: 'ÿ¨ŸéŸÑŸéŸë', translit: 'jalla' },
                    { arabic: 'ŸÉŸèŸÑŸéŸë', translit: 'kulla' },
                    { arabic: 'ÿ∏ŸêŸÑŸêŸë', translit: 'dhilli' },
                    { arabic: 'ÿ∂Ÿèÿ±ŸêŸë', translit: 'durri' },
                    { arabic: 'ÿ£ŸèŸÖŸéŸë', translit: 'umma' }
                ]
            },
            19: {
                title: 'Shaddah Practice',
                arabicTitle: 'ÿ™ŸéŸÖŸéÿßÿ±ŸêŸäŸÜ ÿßŸÑÿ¥ŸéŸëÿØŸéŸëÿ©',
                symbol: 'ÿßŸêŸÑŸéŸëÿß',
                description: 'More practice with doubled letters in words',
                kidTip: 'Remember: press and hold those doubled letters!',
                type: 'shadda',
                exercises: [
                    { arabic: 'ÿ•ŸêŸÑŸéŸëÿß', translit: 'illaa' },
                    { arabic: 'ÿ®ŸéŸÑŸéŸëÿß', translit: 'ballaa' },
                    { arabic: 'ŸÉŸéŸÑŸéŸëÿß', translit: 'kallaa' },
                    { arabic: 'ÿ•ŸêŸäŸéŸëÿßŸÉŸé', translit: 'iyyaaka' },
                    { arabic: 'ŸÖŸêŸÜŸéŸëÿß', translit: 'minnaa' },
                    { arabic: 'ÿ£ŸéŸÜŸéŸëŸâ', translit: 'annaa' },
                    { arabic: 'ÿ≠Ÿéÿ™ŸéŸëŸâ', translit: 'hattaa' },
                    { arabic: 'ÿ±Ÿéÿ®ŸêŸëŸäŸé', translit: 'rabbiya' },
                    { arabic: 'ÿ£ŸéŸÜŸêŸëŸä', translit: 'annee' },
                    { arabic: 'ŸÑŸéÿ¥Ÿéÿ™ŸéŸëŸâ', translit: 'lashattaa' },
                    { arabic: 'ÿµŸéŸÑŸéŸëŸâ', translit: 'sallaa' },
                    { arabic: 'ÿ¨ŸéŸÑŸíŸáŸéÿß', translit: 'jallahaa' },
                    { arabic: 'ÿ≤ŸéŸÉŸéŸëÿßŸáŸéÿß', translit: 'zakkaahaa' },
                    { arabic: 'ÿ£ŸéŸÜŸéÿßŸíÿ®ŸêŸäŸé', translit: 'anaabiya' },
                    { arabic: 'ÿßŸÑŸÑŸáŸé', translit: 'Allaaha' },
                    { arabic: 'ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß', translit: 'rabbanaa' },
                    { arabic: 'ŸÅŸéŸÑŸéŸÖŸéŸëÿß', translit: 'falammaa' },
                    { arabic: 'ÿ•ŸêŸÜŸéŸëŸÖŸéÿß', translit: 'innamaa' },
                    { arabic: 'ŸÉŸèŸÜŸéŸëÿß', translit: 'kunnaa' },
                    { arabic: 'ÿ•ŸêŸÜŸéŸëŸáŸéÿß', translit: 'innahaa' }
                ]
            },
            20: {
                title: 'Madd Rules',
                arabicTitle: 'ÿ£Ÿéÿ≠ŸíŸÉŸéÿßŸÖ ÿßŸÑŸÖŸéÿØŸë',
                symbol: 'ÿ®Ÿéÿ¢ / ÿ®Ÿéÿ¢ÿ°Ÿí',
                description: 'Short Madd: stretch 2 counts. Long Madd (before sukoon/shaddah): stretch 4-5 counts.',
                kidTip: 'Short = 1-2-stretch. Long = 1-2-3-4-stretch!',
                type: 'madd-rules',
                exercises: [
                    { arabic: 'ÿ®Ÿéÿß', translit: 'baa (2)' },
                    { arabic: 'ÿ®ŸèŸà', translit: 'boo (2)' },
                    { arabic: 'ÿ®ŸêŸä', translit: 'bee (2)' },
                    { arabic: 'ÿ≥Ÿéÿß', translit: 'saa (2)' },
                    { arabic: 'ÿ≥ŸèŸà', translit: 'soo (2)' },
                    { arabic: 'ÿ≥ŸêŸä', translit: 'see (2)' },
                    { arabic: 'ÿ®Ÿéÿ¢ÿ°Ÿé', translit: 'baa\'a (4)' },
                    { arabic: 'ÿ¨Ÿéÿ¢ÿ°Ÿé', translit: 'jaa\'a (4)' },
                    { arabic: 'ÿ≥Ÿéÿ¢ÿ°Ÿé', translit: 'saa\'a (4)' },
                    { arabic: 'ÿ¥Ÿéÿ¢ÿ°Ÿé', translit: 'shaa\'a (4)' },
                    { arabic: 'ŸÖŸéÿ¢ÿ°ŸéŸáŸéÿß', translit: 'maa\'ahaa' },
                    { arabic: 'ÿ≥ŸèŸàŸíÿ°Ÿé', translit: 'soo\'a' },
                    { arabic: 'ÿπŸéÿ∑Ÿéÿ¢ÿ°Ÿé', translit: '\'ataa\'a' },
                    { arabic: 'ÿ∫Ÿèÿ´Ÿéÿ¢ÿ°Ÿé', translit: 'ghuthaa\'a' },
                    { arabic: 'ŸÜŸêÿ≥Ÿéÿ¢ÿ°Ÿé', translit: 'nisaa\'a' },
                    { arabic: 'ÿ£ŸéÿØŸéÿ¢ÿ°Ÿé', translit: 'adaa\'a' },
                    { arabic: 'ÿ≥ŸéŸàŸéÿ¢ÿ°Ÿé', translit: 'sawaa\'a' },
                    { arabic: 'ÿ¨Ÿéÿ≤Ÿéÿ¢ÿ°Ÿè', translit: 'jazaa\'u' },
                    { arabic: 'ÿ®ŸéŸÑŸéÿ¢ÿ°Ÿå', translit: 'balaa\'un' },
                    { arabic: 'ÿØŸêŸÖŸéÿ¢ÿ°ŸèŸÉŸèŸÖŸí', translit: 'dimaa\'ukum' },
                    { arabic: 'ÿ≠ŸèŸÜŸéŸÅŸéÿ¢ÿ°Ÿé', translit: 'hunafaa\'a' },
                    { arabic: 'ÿ£ŸéŸàŸíŸÑŸêŸäŸéÿ¢ÿ°Ÿè', translit: 'awliyaa\'u' },
                    { arabic: 'ÿ¨ŸêŸäŸíŸìÿ°Ÿé', translit: 'jee\'a (6)' },
                    { arabic: 'ÿ≥ŸêŸäŸíŸìÿ°Ÿé', translit: 'see\'a (6)' },
                    { arabic: 'ŸäŸèÿ∂ŸêŸäŸíŸìÿ°Ÿè', translit: 'yudee\'u (6)' },
                    { arabic: 'ÿ®Ÿéÿ±ŸêŸäŸíŸìÿ°Ÿå', translit: 'baree\'un' },
                    { arabic: 'ÿÆŸéÿ∑ŸêŸäŸíŸìÿ¶Ÿéÿ©Ÿå', translit: 'khatee\'atun' }
                ]
            },
            21: {
                title: 'Combined Practice 1',
                arabicTitle: 'ÿ™ŸéŸÖŸéÿßÿ±ŸêŸäŸÜ ŸÖŸèÿ±ŸéŸÉŸéŸëÿ®Ÿéÿ© Ÿ°',
                description: 'Practice combining all the rules you\'ve learned',
                kidTip: 'Use everything you know - take it slow!',
                type: 'combined',
                exercises: [
                    { arabic: 'ÿ∂ŸéÿßŸÑŸãŸëÿß', translit: 'daallan' },
                    { arabic: 'ÿ≠Ÿéÿßÿ¨ŸéŸëŸÉŸé', translit: 'haajjaka' },
                    { arabic: 'ÿØŸéÿßÿ®ŸéŸëÿ©Ÿç', translit: 'daabbatin' },
                    { arabic: 'ÿ±ŸéÿßÿØŸêŸëŸÉŸé', translit: 'raaddika' },
                    { arabic: 'ÿÆŸéÿßÿµŸéŸëÿ©Ÿã', translit: 'khaassatan' },
                    { arabic: 'ŸÉŸéÿßŸÅŸéŸëÿ©Ÿã', translit: 'kaaffatan' },
                    { arabic: 'ÿ®Ÿêÿ∂Ÿéÿßÿ±ŸêŸëŸáŸêŸÖŸí', translit: 'bidaarrihi' },
                    { arabic: 'ÿ™Ÿéÿ≠Ÿíÿ∂Ÿèÿ±ŸèŸàŸÜŸé', translit: 'tahduuroona' },
                    { arabic: 'ÿ¨ŸéÿßŸÜŸåŸë', translit: 'jaannun' },
                    { arabic: 'ÿßŸ∞ŸÖŸêŸäŸÜŸé', translit: 'aameena' },
                    { arabic: 'ÿ∏ŸéÿßŸÜŸêŸëŸäŸÜŸé', translit: 'dhaanneena' },
                    { arabic: 'ÿ∂ŸéÿßŸÑŸêŸëŸäŸÜŸé', translit: 'daalleena' },
                    { arabic: 'ÿßŸ∞ŸÑŸ∞ÿ¶ŸèŸÜŸé', translit: 'aalaa\'una' },
                    { arabic: 'ÿßŸÑŸÑŸáŸè', translit: 'Allaahu' }
                ]
            },
            22: {
                title: 'Alif at Word End',
                arabicTitle: 'ÿßŸÑÿ£ŸéŸÑŸêŸÅ ŸÅŸêŸä ÿ¢ÿÆŸêÿ± ÿßŸÑŸÉŸéŸÑŸêŸÖŸéÿ©',
                description: 'Practice words where alif at the end affects pronunciation',
                kidTip: 'Watch for the alif - does it stretch or stay silent?',
                type: 'combined',
                exercises: [
                    { arabic: 'ÿπŸéŸÖŸéŸë', translit: '\'amma' },
                    { arabic: 'ÿπŸéŸÖŸéŸëÿß', translit: '\'ammaa' },
                    { arabic: 'ŸÅŸêŸäŸÖŸé', translit: 'feema' },
                    { arabic: 'ŸÅŸêŸäŸÖŸéÿß', translit: 'feemaa' },
                    { arabic: 'ŸÖŸêŸÖŸéŸë', translit: 'mimma' },
                    { arabic: 'ŸÉŸéÿßŸÜŸé', translit: 'kaana' },
                    { arabic: 'ŸÉŸéÿßŸÜŸéÿß', translit: 'kaanaa' },
                    { arabic: 'ÿ•ŸêŸÜŸéŸë', translit: 'inna' },
                    { arabic: 'ÿ•ŸêŸÜŸéŸëÿß', translit: 'innaa' },
                    { arabic: 'ÿ∏ŸéŸÜŸéŸë', translit: 'dhanna' },
                    { arabic: 'ÿ∏ŸéŸÜŸéŸëÿß', translit: 'dhannaa' }
                ]
            },
            23: {
                title: 'Phrase Practice 1',
                arabicTitle: 'ÿ™ŸéŸÖŸéÿßÿ±ŸêŸäŸÜ ÿßŸÑÿπŸêÿ®Ÿéÿßÿ±Ÿéÿßÿ™ Ÿ°',
                description: 'Practice reading longer phrases from the Quran',
                kidTip: 'Read word by word, then put them together!',
                type: 'phrases',
                exercises: [
                    { arabic: 'ÿ±Ÿéÿ≥ŸèŸàŸÑŸè ŸÖŸêŸÜŸé ÿßŸÑŸÑŸáŸê', translit: 'rasoolum minAllaahi' },
                    { arabic: 'ŸÉŸêÿ™Ÿéÿßÿ®Ÿå ŸÖŸèÿ®ŸêŸäŸÜŸå', translit: 'kitaabum mubeen' },
                    { arabic: 'ÿÆŸéŸäŸíÿ±Ÿå ŸÖŸêŸÜŸíŸáŸè', translit: 'khayrum minhu' },
                    { arabic: 'ÿ®Ÿêÿ≠Ÿêÿ¨Ÿéÿßÿ±Ÿéÿ©Ÿç ŸÖŸêŸÜŸí ÿ≥Ÿêÿ¨ŸêŸëŸäŸÑŸç', translit: 'bihijaaratim min sijjeel' },
                    { arabic: 'ŸÑŸéŸàŸíÿ≠Ÿç ŸÖŸéÿ≠ŸíŸÅŸèŸàÿ∏Ÿç', translit: 'lawhim mahfoodh' },
                    { arabic: 'ÿµŸèÿ≠ŸèŸÅŸãÿß ŸÖŸèÿ∑ŸéŸáŸéŸëÿ±Ÿéÿ©Ÿã', translit: 'suhufam mutahharah' },
                    { arabic: 'ÿπŸêŸäÿ¥Ÿéÿ©Ÿã ÿ±Ÿéÿßÿ∂ŸêŸäŸéÿ©Ÿç', translit: '\'eeshatam raadiyah' },
                    { arabic: 'ÿ¨ŸéŸÜŸéŸëÿ™Ÿç ŸÑŸéŸáŸèŸÖŸí', translit: 'jannatil lahum' },
                    { arabic: 'ÿÆŸéŸäŸíÿ±Ÿå ŸÑŸêŸëÿ£ŸéŸÜŸíŸÅŸèÿ≥ŸêŸáŸêŸÖŸí', translit: 'khayrul li\'anfusihim' },
                    { arabic: 'ÿ∫ŸéŸÅŸèŸàÿ±Ÿå ÿ±Ÿéÿ≠ŸêŸäŸÖŸå', translit: 'ghafoorur raheem' },
                    { arabic: 'ŸÇŸéŸàŸíŸÑŸèŸàÿß ŸÑŸéŸáŸèŸÖŸí ŸÇŸéŸàŸíŸÑŸãÿß ŸÖŸéÿπŸíÿ±ŸèŸàŸÅŸãÿß', translit: 'qooloo lahum qawlam ma\'roofaa' },
                    { arabic: 'ŸÑŸéÿ¢ ÿ•ŸêŸÑŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸáŸè ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸå ÿ±Ÿéÿ≥ŸèŸàŸÑŸè ÿßŸÑŸÑŸáŸê', translit: 'laa ilaaha illAllaahu Muhammadur rasoolullaah' }
                ]
            },
            24: {
                title: 'Phrase Practice 2',
                arabicTitle: 'ÿ™ŸéŸÖŸéÿßÿ±ŸêŸäŸÜ ÿßŸÑÿπŸêÿ®Ÿéÿßÿ±Ÿéÿßÿ™ Ÿ¢',
                description: 'More phrase practice with connected reading',
                kidTip: 'Connect the words smoothly when reading!',
                type: 'phrases',
                exercises: [
                    { arabic: 'ŸÖŸêŸÜŸí ŸÖŸéÿ¢ÿ°Ÿç', translit: 'mim maa\'in' },
                    { arabic: 'ŸÖŸêŸÜŸí ŸÖŸèÿ´ŸíŸÑŸêŸáŸê', translit: 'mim mithlihi' },
                    { arabic: 'ŸàŸéÿ•ŸêŸÜŸí ŸÖŸêŸÜŸí ÿ¥ŸéŸäŸíÿ°Ÿç', translit: 'wa in min shay\'in' },
                    { arabic: 'ŸÖŸêŸÜŸí ŸÑŸéÿØŸèŸÜŸíŸáŸè', translit: 'mil ladunhu' },
                    { arabic: 'ŸÑŸéŸÖŸí ŸäŸéŸÉŸèŸÜŸí ŸÑŸéŸáŸè', translit: 'lam yakul lahu' },
                    { arabic: 'ÿ£ŸéŸÜŸí ŸÑŸéŸÖŸí ŸäŸéÿ±ŸéŸáŸè', translit: 'al lam yarahu' },
                    { arabic: 'ŸÖŸêŸÜŸí ÿ±Ÿéÿ®ŸêŸëŸÉŸé', translit: 'mir rabbika' },
                    { arabic: 'ŸÖŸêŸÜŸí ÿ±Ÿéÿ≠ŸêŸÖŸé', translit: 'mar rahima' },
                    { arabic: 'ÿ£ŸéŸÜŸí ÿ±Ÿéÿ¢ŸáŸè', translit: 'ar raahu' },
                    { arabic: 'ŸÇŸèŸÑŸí ÿ±Ÿéÿ®ŸêŸë', translit: 'qur rabbi' },
                    { arabic: 'ÿ®ŸéŸÑŸí ÿ±ŸéŸÅŸéÿπŸé', translit: 'bar rafa\'a' },
                    { arabic: 'ÿπŸéÿßÿ®ŸêÿØŸè ŸÖŸéÿß', translit: '\'aabidu maa' },
                    { arabic: 'ŸàŸéÿ¨ŸéÿØŸíÿ™ŸèŸÖŸí', translit: 'wa jadtum' },
                    { arabic: 'ŸàŸéÿπŸéŸÑŸ∞ÿßÿ™ŸèŸáŸèŸÖŸí', translit: 'wa \'alaatuhum' },
                    { arabic: 'ŸàŸéÿ•ŸêŸÜŸí ÿπŸèÿ∞Ÿíÿ™ŸèŸÖŸí', translit: 'wa in \'udtum' },
                    { arabic: 'ŸàŸéÿßŸêÿ±ŸíŸÉŸéÿ®Ÿí ŸÖŸéÿπŸéŸÜŸéÿß', translit: 'warkab ma\'anaa' }
                ]
            },
            25: {
                title: 'Longer Phrases',
                arabicTitle: 'ÿπŸêÿ®Ÿéÿßÿ±Ÿéÿßÿ™ ÿ∑ŸéŸàŸêŸäŸÑŸéÿ©',
                description: 'Practice with longer Quranic phrases',
                kidTip: 'Take a breath, read carefully, you can do it!',
                type: 'phrases',
                exercises: [
                    { arabic: 'ÿ≠Ÿèÿ®ŸãŸëÿß ŸàŸéŸÜŸéÿ®Ÿéÿßÿ™Ÿãÿß', translit: 'hubban wa nabaataa' },
                    { arabic: 'ÿ•ŸêŸäŸÖŸéÿßŸÜŸãÿß ŸàŸéŸÇŸéÿßŸÑŸèŸàÿß', translit: 'eemaanan wa qaaloo' },
                    { arabic: 'ŸàŸéŸÑŸêŸäŸãŸëÿß ŸàŸéŸÑŸéÿß ŸÜŸéÿµŸêŸäÿ±Ÿãÿß', translit: 'waliyyan walaa naseeraa' },
                    { arabic: 'ŸÖŸéÿßŸÑŸå ŸàŸéŸÑŸéÿß ÿ®ŸéŸÜŸèŸàŸÜŸé', translit: 'maalun walaa banoon' },
                    { arabic: 'ŸäŸéŸàŸíŸÖŸéÿ¶Ÿêÿ∞Ÿç ŸàŸéÿßÿ¨ŸêŸÅŸéÿ©Ÿå', translit: 'yawma\'idhin waajifah' },
                    { arabic: 'ÿÆŸéŸäŸíÿ±Ÿãÿß ŸäŸéÿ±ŸéŸáŸè', translit: 'khayran yarahu' },
                    { arabic: 'ŸàŸéŸäŸíŸÑŸå ŸäŸéŸàŸíŸÖŸéÿ¶Ÿêÿ∞Ÿç', translit: 'waylun yawma\'idhin' },
                    { arabic: 'ÿØŸéÿßŸÅŸêŸÇŸç ŸäŸéÿÆŸíÿ±Ÿèÿ¨Ÿè', translit: 'daafiqin yakhruju' },
                    { arabic: 'ÿ£ŸéŸÜŸí ŸäŸéÿ¥Ÿéÿ¢ÿ°Ÿé', translit: 'an yashaa\'a' },
                    { arabic: 'ŸÅŸéŸÖŸéŸÜŸí ŸäŸéÿπŸíŸÖŸéŸÑŸí', translit: 'fa man ya\'mal' },
                    { arabic: 'ŸàŸéÿ•ŸêŸÜŸí ŸäŸèÿ±ŸêŸäÿØŸèŸàÿß', translit: 'wa in yureedoo' },
                    { arabic: 'ÿ•ŸêŸÜŸí ŸäŸéŸÜŸíÿµŸèÿ±ŸíŸÉŸèŸÖŸí', translit: 'in yansurkum' }
                ]
            },
            26: {
                title: 'Noon Sakin Rules',
                arabicTitle: 'ÿ£Ÿéÿ≠ŸíŸÉŸéÿßŸÖ ÿßŸÑŸÜŸèŸëŸàŸÜ ÿßŸÑÿ≥ŸéŸëÿßŸÉŸêŸÜŸéÿ©',
                description: 'When Noon Sakin or Tanween meets certain letters, the sound changes',
                kidTip: 'The "n" sound hides or merges with the next letter!',
                type: 'noon-rules',
                exercises: [
                    { arabic: 'ŸÖŸêŸÜŸí ÿ®ŸéÿπŸíÿØŸê', translit: 'mim ba\'di' },
                    { arabic: 'ÿ®ŸêÿßŸÑŸíÿ¨ŸèŸÜŸíÿ®Ÿê', translit: 'bil junbi' },
                    { arabic: 'ŸÑŸêŸäŸèŸÜŸíÿ®Ÿéÿ∞ŸéŸÜŸéŸë', translit: 'li yunbadhanna' },
                    { arabic: 'ÿ∞ŸéŸÜŸíÿ®Ÿç', translit: 'dhambin' },
                    { arabic: 'ÿ£ŸéŸÜŸíÿ®ŸêŸäŸéÿ¢ÿ°Ÿé', translit: 'ambiyaa\'a' },
                    { arabic: 'ŸÖŸêŸÜŸí ÿ®ŸéÿÆŸêŸÑŸé', translit: 'mam bakhila' },
                    { arabic: 'ŸÖŸêŸÜŸí ÿ®ŸéŸäŸíŸÜŸê', translit: 'mim bayni' },
                    { arabic: 'ÿ£ŸéŸÜŸíÿ®Ÿéÿ™ŸíŸÜŸéÿß', translit: 'ambatnaa' },
                    { arabic: 'ŸÑŸéŸÜŸéÿ≥ŸíŸÅŸéÿπŸãÿß ÿ®ŸêÿßŸÑŸÜŸéŸëÿßÿµŸêŸäŸéÿ©Ÿê', translit: 'lanasfa\'am bin naasiyah' },
                    { arabic: 'ÿÆŸéÿ®ŸêŸäÿ±Ÿå ÿ®ŸêŸÖŸéÿß ÿ™ŸéÿπŸíŸÖŸéŸÑŸèŸàŸÜŸé', translit: 'khabeerum bimaa ta\'maloon' },
                    { arabic: 'ÿ£Ÿéÿ®ŸéÿØŸãÿß ÿßŸêÿ®ŸíŸÖŸéÿß', translit: 'abadan ibmaa' },
                    { arabic: 'ÿπŸéŸÑŸêŸäŸÖŸå ÿ®ŸêŸáŸê', translit: '\'aleemum bihi' },
                    { arabic: 'ÿ≥ŸéŸàŸéÿ¢ÿ°Ÿå ÿ®ŸéŸäŸíŸÜŸéŸÜŸéÿß', translit: 'sawaa\'um baynanaa' }
                ]
            },
            27: {
                title: 'More Noon Rules',
                arabicTitle: 'ÿßŸÑŸÖŸéÿ≤ŸêŸäÿØ ŸÖŸêŸÜŸí ÿ£Ÿéÿ≠ŸíŸÉŸéÿßŸÖ ÿßŸÑŸÜŸèŸëŸàŸÜ',
                description: 'Continue practicing Noon Sakin rules in context',
                kidTip: 'Listen for how the "n" sound changes!',
                type: 'noon-rules',
                exercises: [
                    { arabic: 'ŸÇŸéÿØŸêŸäÿ±Ÿå ÿßŸêŸÑŸéŸëÿ∞ŸêŸä', translit: 'qadeerun illadhee' },
                    { arabic: 'ŸÑŸéŸáŸéŸÖŸíÿ≤Ÿéÿ©Ÿå ÿßŸêŸÑŸéŸëÿ∞ŸêŸä', translit: 'lahumazatun illadhee' },
                    { arabic: 'ŸÜŸèŸàÿ≠Ÿå ŸÑŸêÿ•Ÿêÿ®ŸíŸÜŸêŸáŸê', translit: 'noohul libnihi' },
                    { arabic: 'ÿÆŸéŸäŸíÿ±Ÿãÿß ÿßŸÑŸíŸàŸéÿµŸêŸäŸéŸëÿ©Ÿè', translit: 'khayran il wasiyyah' },
                    { arabic: 'ÿ¥ŸéŸäŸíÿ¶Ÿãÿß ÿßŸêÿ™ŸéŸëÿÆŸéÿ∞ŸéŸáŸéÿß', translit: 'shay\'an ittakhadhahaa' }
                ]
            },
            28: {
                title: 'Waqf (Stopping)',
                arabicTitle: 'ÿßŸÑŸàŸéŸÇŸíŸÅ',
                description: 'Practice stopping at the end of verses with proper pronunciation',
                kidTip: 'When you see the stop sign (€ö €ñ €ó), pause and breathe!',
                type: 'waqf',
                exercises: [
                    { arabic: 'ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®ŸêÿßŸÑŸÑŸáŸê ŸÖŸêŸÜŸé ÿßŸÑÿ¥ŸéŸëŸäŸíÿ∑ŸéÿßŸÜŸê ÿßŸÑÿ±ŸéŸëÿ¨ŸêŸäŸÖŸê €ù', translit: 'a\'oodhu billaahi minash shaytaanir rajeem' },
                    { arabic: 'ŸÇŸèŸÑŸí ŸáŸèŸàŸé ÿßŸÑŸÑŸáŸè ÿ£Ÿéÿ≠ŸéÿØŸå €ù', translit: 'qul huwallaahu ahad' },
                    { arabic: 'ŸÖŸêŸÜŸí ÿÆŸéŸàŸíŸÅŸç €ù ŸàŸéÿ¨ŸéŸÜŸéŸëÿ™Ÿç', translit: 'min khawf, wa jannatin' },
                    { arabic: 'ÿßŸÑŸíŸÅŸéÿßŸÅŸéÿß €ù ÿ•Ÿêÿ∞Ÿéÿß ÿ≠Ÿéÿ≥ŸéÿØŸé €ù', translit: 'al faafaa, idhaa hasad' },
                    { arabic: 'ŸÑŸêŸÖŸéÿß ŸäŸèÿ±ŸêŸäÿØŸè €ù ÿ®Ÿêÿ£ŸéÿµŸíÿ≠Ÿéÿ®Ÿê', translit: 'limaa yureed, bi ashaabi' },
                    { arabic: 'ÿßŸÑŸíŸÅŸêŸäŸÑŸê €ù ÿ£Ÿéÿ®ŸêŸä ŸÑŸéŸáŸéÿ®Ÿé ŸàŸéÿ™Ÿéÿ®ŸéŸë €ù', translit: 'al feel, abee lahab wa tabb' },
                    { arabic: 'ŸÑŸêŸÖŸéŸÜŸí ÿÆŸéÿ¥ŸêŸäŸé ÿ±Ÿéÿ®ŸéŸëŸáŸè €ù', translit: 'liman khashiya rabbahu' },
                    { arabic: 'ŸÑŸêÿ™ŸéÿπŸíÿ¨ŸéŸÑŸé ÿ®ŸêŸáŸê €ù ÿ•ŸêŸÜŸéŸëŸáŸè ŸÉŸéÿßŸÜŸé ÿ™ŸéŸàŸéŸëÿßÿ®Ÿãÿß €ù', translit: 'lita\'jala bihi, innahu kaana tawwaabaa' },
                    { arabic: 'ŸàŸéÿ¥ŸéÿßŸáŸêÿØŸç ŸàŸéŸë', translit: 'wa shaahidiw wa' },
                    { arabic: 'ŸÖŸéÿ¥ŸíŸáŸèŸàÿØŸç €ù', translit: 'mashhood' },
                    { arabic: 'ŸÖŸêŸÜŸíŸáŸèŸÖŸí ÿ™ŸèŸÇŸéÿ©Ÿã €û ÿ∞Ÿèÿ±ŸêŸëŸäŸéŸëÿ©Ÿã ÿ∑ŸéŸäŸêŸëÿ®Ÿéÿ©Ÿã €û', translit: 'minhum tuqah, dhurriyyatan tayyibah' }
                ]
            },
            29: {
                title: 'Huroof Muqatta\'at',
                arabicTitle: 'ÿßŸÑÿ≠Ÿèÿ±ŸèŸàŸÅ ÿßŸÑŸÖŸèŸÇŸéÿ∑ŸéŸëÿπŸéÿßÿ™',
                symbol: 'ÿßŸÑŸìŸÖŸì',
                description: 'The mysterious letters at the start of some Surahs - read each letter separately',
                kidTip: 'Spell out each letter with its stretched sound!',
                type: 'muqattaat',
                exercises: [
                    { arabic: 'ÿßŸÑŸìŸÖŸì', translit: 'Alif-Laam-Meem' },
                    { arabic: 'ÿßŸÑŸìŸÖŸìÿµŸì', translit: 'Alif-Laam-Meem-Saad' },
                    { arabic: 'ÿßŸÑŸìÿ±Ÿ∞', translit: 'Alif-Laam-Raa' },
                    { arabic: 'ÿßŸÑŸìŸÖŸìÿ±Ÿ∞', translit: 'Alif-Laam-Meem-Raa' },
                    { arabic: 'ŸÉŸìŸáŸ∞ŸäŸ∞ÿπŸìÿµŸì', translit: 'Kaaf-Haa-Yaa-\'Ayn-Saad' },
                    { arabic: 'ÿ∑Ÿ∞ŸáŸ∞', translit: 'Taa-Haa' },
                    { arabic: 'ÿ∑Ÿ∞ÿ≥ŸìŸÖŸì', translit: 'Taa-Seen-Meem' },
                    { arabic: 'ÿ∑Ÿ∞ÿ≥Ÿì', translit: 'Taa-Seen' },
                    { arabic: 'ŸäŸ∞ÿ≥Ÿì', translit: 'Yaa-Seen' },
                    { arabic: 'ÿµŸì', translit: 'Saad' },
                    { arabic: 'ÿ≠Ÿ∞ŸÖŸì', translit: 'Haa-Meem' },
                    { arabic: 'ÿπŸìÿ≥ŸìŸÇŸì', translit: '\'Ayn-Seen-Qaaf' },
                    { arabic: 'ŸÇŸì', translit: 'Qaaf' },
                    { arabic: 'ŸÜŸì', translit: 'Noon' }
                ]
            }
        };

        // =====================================================
        // APP STATE
        // =====================================================

        let currentLesson = 1;
        let practiceItems = new Set();
        let shuffleMode = false;
        let completedLessons = new Set();
        let exerciseChunk = 0;
        const CHUNK_SIZE = 10;

        // Long press handling
        const LONG_PRESS_DURATION = 500;
        let pressTimer = null;
        let currentPressedCard = null;

        // Practice mode
        let practiceIndex = 0;
        let practiceArray = [];

        // =====================================================
        // INITIALIZATION
        // =====================================================

        function init() {
            initTTS();
            renderLessonNav();
            renderLesson(currentLesson);
            setupEventListeners();
            loadProgress();
            checkOnboarding();
            registerServiceWorker();
        }

        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(() => console.log('Service Worker registered'))
                    .catch((err) => console.log('Service Worker registration failed:', err));
            }
        }

        // =====================================================
        // ONBOARDING
        // =====================================================

        function checkOnboarding() {
            const hasSeenOnboarding = localStorage.getItem('qaidaOnboarding');
            if (!hasSeenOnboarding) {
                document.getElementById('onboarding').classList.remove('hidden');
            } else {
                document.getElementById('onboarding').classList.add('hidden');
            }

            // Setup start button
            document.getElementById('startLearning').addEventListener('click', () => {
                localStorage.setItem('qaidaOnboarding', 'true');
                document.getElementById('onboarding').classList.add('hidden');
            });
        }

        // =====================================================
        // CELEBRATION
        // =====================================================

        function showCelebration(lessonNum) {
            const overlay = document.getElementById('celebration');
            const message = document.getElementById('celebrationMessage');
            const confettiContainer = document.getElementById('confetti');

            message.textContent = `You completed Lesson ${lessonNum}: ${lessons[lessonNum].title}!`;

            // Generate confetti
            confettiContainer.innerHTML = '';
            const colors = ['#E07A5F', '#D4A853', '#2A9D8F', '#1A6B6B', '#264653'];
            for (let i = 0; i < 50; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + '%';
                piece.style.background = colors[Math.floor(Math.random() * colors.length)];
                piece.style.animationDelay = Math.random() * 2 + 's';
                piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confettiContainer.appendChild(piece);
            }

            overlay.classList.add('show');
        }

        function hideCelebration() {
            document.getElementById('celebration').classList.remove('show');
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('qaidaProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    completedLessons = new Set(data.completed || []);
                    updateLessonNavProgress();
                }
            } catch (e) {
                console.log('No saved progress');
            }
        }

        function saveProgress() {
            try {
                localStorage.setItem('qaidaProgress', JSON.stringify({
                    completed: Array.from(completedLessons)
                }));
            } catch (e) {
                console.log('Could not save progress');
            }
        }

        // =====================================================
        // LESSON NAVIGATION
        // =====================================================

        // Lesson groups for navigation
        const lessonGroups = [
            { name: 'Letters', icon: 'üî§', lessons: [1] },
            { name: 'Basic Vowels', icon: 'üìñ', lessons: [2, 3, 4] },
            { name: 'Tanween', icon: '‚ú®', lessons: [5, 6, 7] },
            { name: 'Madd (Stretching)', icon: '„Ä∞Ô∏è', lessons: [8, 9, 10, 11, 12, 13, 14] },
            { name: 'Sukoon & Leen', icon: '‚≠ï', lessons: [15, 16, 17] },
            { name: 'Shaddah', icon: 'üí™', lessons: [18, 19] },
            { name: 'Advanced Rules', icon: 'üéì', lessons: [20, 21, 22, 23, 24, 25, 26, 27, 28, 29] }
        ];

        const TOTAL_LESSONS = 29;

        function renderLessonNav() {
            // Update compact header nav
            document.getElementById('lessonNumber').textContent = `${currentLesson} / ${TOTAL_LESSONS}`;
            document.getElementById('prevLesson').disabled = currentLesson <= 1;
            document.getElementById('nextLesson').disabled = currentLesson >= TOTAL_LESSONS;

            // Update slide-out menu
            renderLessonMenu();
        }

        function renderLessonMenu() {
            const menuList = document.getElementById('lessonMenuList');

            // Build flat list of all lessons with their titles
            let menuHTML = '';
            for (let i = 1; i <= TOTAL_LESSONS; i++) {
                const lesson = lessons[i];
                const isActive = i === currentLesson;
                const isCompleted = completedLessons.has(i);

                menuHTML += `
                    <button class="lesson-menu-item ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}"
                            data-lesson="${i}">
                        <span class="lesson-num">${isCompleted && !isActive ? '' : i}</span>
                        <span class="lesson-name">${lesson.title}</span>
                    </button>
                `;
            }

            menuList.innerHTML = menuHTML;
        }

        function openLessonMenu() {
            document.getElementById('lessonMenu').classList.add('open');
            document.getElementById('menuOverlay').classList.add('open');
            document.body.style.overflow = 'hidden';

            // Scroll to active lesson
            setTimeout(() => {
                const activeItem = document.querySelector('.lesson-menu-item.active');
                if (activeItem) {
                    activeItem.scrollIntoView({ block: 'center', behavior: 'smooth' });
                }
            }, 100);
        }

        function closeLessonMenu() {
            document.getElementById('lessonMenu').classList.remove('open');
            document.getElementById('menuOverlay').classList.remove('open');
            document.body.style.overflow = '';
        }

        function goToPrevLesson() {
            if (currentLesson > 1) {
                renderLesson(currentLesson - 1);
            }
        }

        function goToNextLesson() {
            if (currentLesson < TOTAL_LESSONS) {
                renderLesson(currentLesson + 1);
            }
        }

        function updateLessonNavProgress() {
            // Re-render the menu to show completion status
            renderLessonMenu();
        }

        // =====================================================
        // LESSON RENDERING
        // =====================================================

        function renderLesson(lessonNum) {
            currentLesson = lessonNum;
            exerciseChunk = 0;
            const lesson = lessons[lessonNum];
            const content = document.getElementById('lessonContent');

            // Update compact nav and menu
            renderLessonNav();

            let html = `
                <div class="lesson-header">
                    <h2>Lesson ${lessonNum}: ${lesson.title}</h2>
                    ${lesson.arabicTitle ? `<div class="arabic-title">${lesson.arabicTitle}</div>` : ''}
                    <p class="description">${lesson.description}</p>
                    ${lesson.kidTip ? `<div class="kid-tip">${lesson.kidTip}</div>` : ''}
                </div>
            `;

            // Symbol intro card for haraka lessons
            if (lesson.symbol) {
                html += `
                    <div class="symbol-card">
                        <div class="symbol">${lesson.symbol}</div>
                        <p>This is the ${lesson.title} symbol</p>
                    </div>
                `;
            }

            // Alphabet grid (for lesson 1)
            if (lesson.type === 'alphabet') {
                html += `
                    <div class="section-header">
                        <h3>The Letters</h3>
                    </div>
                    <div class="card-grid" id="alphabetGrid"></div>
                `;
            }

            // Letters grid (for lessons that show all letters with haraka)
            if (lesson.type === 'haraka' || lesson.type === 'tanween') {
                html += `
                    <div class="section-header">
                        <h3>Letters with ${lesson.title}</h3>
                    </div>
                    <div class="card-grid" id="lettersGrid"></div>
                `;
            }

            // Custom letters grid (for madd, etc.)
            if (lesson.letters) {
                html += `
                    <div class="section-header">
                        <h3>Practice Sounds</h3>
                    </div>
                    <div class="card-grid" id="lettersGrid"></div>
                `;
            }

            // Exercises
            if (lesson.exercises && lesson.exercises.length > 0) {
                const totalChunks = Math.ceil(lesson.exercises.length / CHUNK_SIZE);
                html += `
                    <div class="section-header">
                        <h3>Exercises</h3>
                        ${totalChunks > 1 ? `
                            <div class="chunk-nav">
                                <button id="prevChunk" ${exerciseChunk === 0 ? 'disabled' : ''}>‚Üê</button>
                                <span id="chunkIndicator">${exerciseChunk + 1}/${totalChunks}</span>
                                <button id="nextChunk" ${exerciseChunk >= totalChunks - 1 ? 'disabled' : ''}>‚Üí</button>
                            </div>
                        ` : ''}
                    </div>
                    <div class="card-grid exercise-grid" id="exerciseGrid"></div>
                `;
            }

            // Mark complete button
            html += `
                <button class="lesson-complete-btn" id="completeBtn">
                    ${completedLessons.has(lessonNum) ? '‚úì Completed - Review Again' : 'Mark as Complete'}
                </button>
            `;

            content.innerHTML = html;

            // Render grids
            if (lesson.type === 'alphabet') {
                renderAlphabetGrid();
            } else if (lesson.type === 'haraka' || lesson.type === 'tanween') {
                renderHarakaGrid(lesson);
            } else if (lesson.letters) {
                renderCustomLettersGrid(lesson);
            }

            if (lesson.exercises) {
                renderExerciseGrid(lesson);
            }

            // Setup chunk navigation
            setupChunkNav(lesson);

            // Setup complete button
            document.getElementById('completeBtn').addEventListener('click', () => {
                const wasAlreadyComplete = completedLessons.has(lessonNum);
                completedLessons.add(lessonNum);
                saveProgress();
                updateLessonNavProgress();
                renderLessonNav(); // Re-render to update group progress counts
                document.getElementById('completeBtn').textContent = '‚úì Completed - Review Again';

                // Show celebration only on first completion
                if (!wasAlreadyComplete) {
                    showCelebration(lessonNum);
                }
            });
        }

        function renderAlphabetGrid() {
            const grid = document.getElementById('alphabetGrid');
            if (!grid) return;

            grid.innerHTML = arabicLetters.map((item, index) => {
                const id = `${currentLesson}-alpha-${index}`;
                return createCard(id, item.letter, item.name);
            }).join('');

            setupCardInteractions(grid);
        }

        function renderHarakaGrid(lesson) {
            const grid = document.getElementById('lettersGrid');
            if (!grid) return;

            const letters = arabicLetters;

            grid.innerHTML = letters.map((item, index) => {
                const arabic = item.letter + lesson.haraka;
                const id = `${currentLesson}-letter-${index}`;
                // Combine consonant sound with vowel sound
                const translit = item.sound + lesson.sound;
                return createCard(id, arabic, translit);
            }).join('');

            setupCardInteractions(grid);
        }

        function renderCustomLettersGrid(lesson) {
            const grid = document.getElementById('lettersGrid');
            if (!grid) return;

            grid.innerHTML = lesson.letters.map((item, index) => {
                const id = `${currentLesson}-custom-${index}`;
                return createCard(id, item.arabic, item.translit);
            }).join('');

            setupCardInteractions(grid);
        }

        function renderExerciseGrid(lesson) {
            const grid = document.getElementById('exerciseGrid');
            if (!grid) return;

            let exercises = [...lesson.exercises];

            if (shuffleMode) {
                exercises = shuffleArray(exercises);
            }

            const start = exerciseChunk * CHUNK_SIZE;
            const end = Math.min(start + CHUNK_SIZE, exercises.length);
            const chunk = exercises.slice(start, end);

            grid.innerHTML = chunk.map((item, index) => {
                const id = `${currentLesson}-ex-${start + index}`;
                return createCard(id, item.arabic, item.translit, true);
            }).join('');

            setupCardInteractions(grid);
        }

        function createCard(id, arabic, translit, isExercise = false) {
            const needsPractice = practiceItems.has(id);
            return `
                <div class="card ${isExercise ? 'exercise-card' : ''} ${needsPractice ? 'needs-practice' : ''}"
                     data-id="${id}" data-arabic="${arabic}" data-translit="${translit}">
                    <div class="card-actions">
                        <button class="card-icon speaker" title="Hear sound">üîä</button>
                        <button class="card-icon bookmark ${needsPractice ? 'active' : ''}" title="Save for practice">‚≠ê</button>
                    </div>
                    <div class="arabic">${arabic}</div>
                    <div class="translit">${translit}</div>
                </div>
            `;
        }

        // =====================================================
        // TEXT-TO-SPEECH (with ElevenLabs audio files)
        // =====================================================

        let hasArabicVoice = false;
        let audioMapping = {};
        let currentAudio = null;

        function initTTS() {
            const checkVoices = () => {
                const voices = speechSynthesis.getVoices();
                hasArabicVoice = voices.some(v => v.lang.startsWith('ar'));
            };

            // Voices load asynchronously
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = checkVoices;
            }
            checkVoices();

            // Load audio mapping for pre-recorded files
            loadAudioMapping();
        }

        async function loadAudioMapping() {
            try {
                const response = await fetch('audio-mapping.json');
                if (response.ok) {
                    audioMapping = await response.json();
                    console.log('Loaded audio mapping:', Object.keys(audioMapping).length, 'sounds');
                }
            } catch (e) {
                console.log('No audio mapping found, using TTS fallback');
            }
        }

        function getAudioFilename(text) {
            // Check if we have a pre-recorded file for this text
            if (audioMapping[text]) {
                return 'audio/' + audioMapping[text];
            }
            return null;
        }

        function speakArabic(text) {
            // Stop any currently playing audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            speechSynthesis.cancel();

            // Try to use pre-recorded audio file first
            const audioFile = getAudioFilename(text);
            if (audioFile) {
                currentAudio = new Audio(audioFile);
                currentAudio.play().catch(err => {
                    console.log('Audio file failed, falling back to TTS:', err);
                    speakWithTTS(text);
                });
                return;
            }

            // Fall back to browser TTS
            speakWithTTS(text);
        }

        function speakWithTTS(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ar';
            utterance.rate = 0.8; // Slightly slower for learning
            speechSynthesis.speak(utterance);
        }

        function canSpeakArabic() {
            return hasArabicVoice || Object.keys(audioMapping).length > 0;
        }

        function setupChunkNav(lesson) {
            const prevBtn = document.getElementById('prevChunk');
            const nextBtn = document.getElementById('nextChunk');

            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    if (exerciseChunk > 0) {
                        exerciseChunk--;
                        renderExerciseGrid(lesson);
                        updateChunkIndicator(lesson);
                        setupChunkNav(lesson);
                    }
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    const totalChunks = Math.ceil(lesson.exercises.length / CHUNK_SIZE);
                    if (exerciseChunk < totalChunks - 1) {
                        exerciseChunk++;
                        renderExerciseGrid(lesson);
                        updateChunkIndicator(lesson);
                        setupChunkNav(lesson);
                    }
                });
            }
        }

        function updateChunkIndicator(lesson) {
            const indicator = document.getElementById('chunkIndicator');
            const prevBtn = document.getElementById('prevChunk');
            const nextBtn = document.getElementById('nextChunk');

            if (indicator && lesson.exercises) {
                const totalChunks = Math.ceil(lesson.exercises.length / CHUNK_SIZE);
                indicator.textContent = `${exerciseChunk + 1}/${totalChunks}`;

                if (prevBtn) prevBtn.disabled = exerciseChunk === 0;
                if (nextBtn) nextBtn.disabled = exerciseChunk >= totalChunks - 1;
            }
        }

        // =====================================================
        // CARD INTERACTIONS
        // =====================================================

        function setupCardInteractions(container) {
            const cards = container.querySelectorAll('.card');

            cards.forEach(card => {
                // Speaker icon - plays audio
                const speakerBtn = card.querySelector('.card-icon.speaker');
                if (speakerBtn) {
                    speakerBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const arabic = card.dataset.arabic;
                        if (arabic && window.speechSynthesis) {
                            speakArabic(arabic);
                            card.classList.add('playing');
                            setTimeout(() => card.classList.remove('playing'), 300);
                        }
                    });
                }

                // Bookmark icon - toggles practice
                const bookmarkBtn = card.querySelector('.card-icon.bookmark');
                if (bookmarkBtn) {
                    bookmarkBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        togglePractice(card);
                        bookmarkBtn.classList.toggle('active', practiceItems.has(card.dataset.id));
                    });
                }

                // Tap card itself - shows transliteration (safe exploration)
                card.addEventListener('click', (e) => {
                    // Ignore if clicking on icons
                    if (e.target.closest('.card-actions')) return;

                    card.classList.toggle('show-translit');
                    if (card.classList.contains('show-translit')) {
                        setTimeout(() => card.classList.remove('show-translit'), 2000);
                    }
                });

                // Touch handling for scroll detection
                let touchStartX, touchStartY, hasMoved;

                card.addEventListener('touchstart', (e) => {
                    if (e.target.closest('.card-actions')) return;
                    const touch = e.touches[0];
                    touchStartX = touch.clientX;
                    touchStartY = touch.clientY;
                    hasMoved = false;
                }, { passive: true });

                card.addEventListener('touchmove', (e) => {
                    const touch = e.touches[0];
                    const deltaX = Math.abs(touch.clientX - touchStartX);
                    const deltaY = Math.abs(touch.clientY - touchStartY);
                    if (deltaX > 10 || deltaY > 10) {
                        hasMoved = true;
                    }
                }, { passive: true });

                card.addEventListener('touchend', (e) => {
                    if (e.target.closest('.card-actions')) return;
                    if (hasMoved) return; // Was a scroll, not a tap

                    // Show transliteration on tap
                    card.classList.add('show-translit');
                    setTimeout(() => card.classList.remove('show-translit'), 2000);
                });
            });
        }

        function startPress(card, e) {
            currentPressedCard = card;
            card.classList.add('pressing');

            pressTimer = setTimeout(() => {
                togglePractice(card);
                card.classList.remove('pressing');
                currentPressedCard = null;
            }, LONG_PRESS_DURATION);
        }

        function endPress(card) {
            if (pressTimer) {
                clearTimeout(pressTimer);
                pressTimer = null;
            }
            card.classList.remove('pressing');
            currentPressedCard = null;
        }

        function cancelPress(card) {
            if (pressTimer) {
                clearTimeout(pressTimer);
                pressTimer = null;
            }
            card.classList.remove('pressing');
            currentPressedCard = null;
        }

        function togglePractice(card) {
            const id = card.dataset.id;

            if (practiceItems.has(id)) {
                practiceItems.delete(id);
                card.classList.remove('needs-practice');
            } else {
                practiceItems.add(id);
                card.classList.add('needs-practice');
            }

            updatePracticeCount();
        }

        function updatePracticeCount() {
            const count = practiceItems.size;
            document.getElementById('practiceCount').textContent = count;
            document.getElementById('practiceBtn').disabled = count === 0;
        }

        // =====================================================
        // PRACTICE MODE
        // =====================================================

        function openPracticeMode() {
            if (practiceItems.size === 0) return;

            practiceArray = Array.from(practiceItems);
            practiceIndex = 0;

            document.getElementById('practiceMode').classList.add('active');
            renderPracticeCard();
        }

        function closePracticeMode() {
            document.getElementById('practiceMode').classList.remove('active');
        }

        function renderPracticeCard() {
            if (practiceArray.length === 0) {
                closePracticeMode();
                return;
            }

            const id = practiceArray[practiceIndex];
            const card = document.querySelector(`[data-id="${id}"]`);

            let arabic = '';
            let translit = '';

            if (card) {
                arabic = card.querySelector('.arabic').textContent;
                translit = card.dataset.translit;
            } else {
                // Card might not be rendered (different lesson), find from data
                const parts = id.split('-');
                const lessonNum = parseInt(parts[0]);
                const lesson = lessons[lessonNum];

                if (parts[1] === 'letter') {
                    const idx = parseInt(parts[2]);
                    const letter = arabicLetters[idx];
                    arabic = letter.letter + lesson.haraka;
                    translit = letter.name.toLowerCase() + lesson.sound;
                } else if (parts[1] === 'ex') {
                    const idx = parseInt(parts[2]);
                    arabic = lesson.exercises[idx].arabic;
                    translit = lesson.exercises[idx].translit;
                } else if (parts[1] === 'custom') {
                    const idx = parseInt(parts[2]);
                    arabic = lesson.letters[idx].arabic;
                    translit = lesson.letters[idx].translit;
                }
            }

            document.getElementById('practiceArabic').textContent = arabic;
            document.getElementById('practiceTranslit').textContent = translit;
            document.getElementById('practiceTranslit').style.opacity = '0';
            document.getElementById('practiceProgress').textContent = `${practiceIndex + 1} of ${practiceArray.length}`;

            // Update nav buttons
            document.getElementById('practicePrev').disabled = practiceIndex === 0;
            document.getElementById('practiceNext').disabled = practiceIndex >= practiceArray.length - 1;
        }

        function practiceNext() {
            if (practiceIndex < practiceArray.length - 1) {
                practiceIndex++;
                renderPracticeCard();
            }
        }

        function practicePrev() {
            if (practiceIndex > 0) {
                practiceIndex--;
                renderPracticeCard();
            }
        }

        function unmarkCurrentPractice() {
            const id = practiceArray[practiceIndex];
            practiceItems.delete(id);

            // Update the card if visible
            const card = document.querySelector(`[data-id="${id}"]`);
            if (card) {
                card.classList.remove('needs-practice');
            }

            // Remove from practice array
            practiceArray.splice(practiceIndex, 1);

            // Adjust index if needed
            if (practiceIndex >= practiceArray.length) {
                practiceIndex = Math.max(0, practiceArray.length - 1);
            }

            updatePracticeCount();

            if (practiceArray.length === 0) {
                closePracticeMode();
            } else {
                renderPracticeCard();
            }
        }

        // =====================================================
        // EVENT LISTENERS
        // =====================================================

        function setupEventListeners() {
            // Compact header navigation - prev/next
            document.getElementById('prevLesson').addEventListener('click', goToPrevLesson);
            document.getElementById('nextLesson').addEventListener('click', goToNextLesson);

            // Hamburger menu toggle
            document.getElementById('menuToggle').addEventListener('click', openLessonMenu);
            document.getElementById('menuClose').addEventListener('click', closeLessonMenu);
            document.getElementById('menuOverlay').addEventListener('click', closeLessonMenu);

            // Menu lesson selection
            document.getElementById('lessonMenuList').addEventListener('click', (e) => {
                const item = e.target.closest('.lesson-menu-item');
                if (item) {
                    renderLesson(parseInt(item.dataset.lesson));
                    closeLessonMenu();
                }
            });

            // Shuffle toggle
            document.getElementById('shuffleBtn').addEventListener('click', () => {
                shuffleMode = !shuffleMode;
                document.getElementById('shuffleBtn').classList.toggle('active', shuffleMode);
                renderLesson(currentLesson);
            });

            // Practice mode
            document.getElementById('practiceBtn').addEventListener('click', openPracticeMode);
            document.getElementById('practiceExit').addEventListener('click', closePracticeMode);
            document.getElementById('practiceNext').addEventListener('click', practiceNext);
            document.getElementById('practicePrev').addEventListener('click', practicePrev);
            document.getElementById('unmarkBtn').addEventListener('click', unmarkCurrentPractice);

            // Practice mode - speaker button
            document.getElementById('practiceSpeaker').addEventListener('click', () => {
                const arabic = document.getElementById('practiceArabic').textContent;
                if (arabic && window.speechSynthesis) {
                    speakArabic(arabic);
                }
            });

            // Practice mode - reveal button
            document.getElementById('practiceReveal').addEventListener('click', () => {
                const translit = document.getElementById('practiceTranslit');
                translit.style.opacity = translit.style.opacity === '1' ? '0' : '1';
            });

            // Tap practice card to toggle transliteration
            document.getElementById('practiceCard').addEventListener('click', (e) => {
                // Ignore clicks on action buttons
                if (e.target.closest('.practice-card-actions')) return;
                const translit = document.getElementById('practiceTranslit');
                translit.style.opacity = translit.style.opacity === '1' ? '0' : '1';
            });

            // Keyboard navigation in practice mode
            document.addEventListener('keydown', (e) => {
                if (!document.getElementById('practiceMode').classList.contains('active')) return;

                if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                    practiceNext();
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                    practicePrev();
                } else if (e.key === 'Escape') {
                    closePracticeMode();
                } else if (e.key === ' ') {
                    e.preventDefault();
                    const translit = document.getElementById('practiceTranslit');
                    translit.style.opacity = translit.style.opacity === '1' ? '0' : '1';
                }
            });

            // Celebration close
            document.getElementById('celebrationClose').addEventListener('click', hideCelebration);
        }

        // =====================================================
        // UTILITIES
        // =====================================================

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // =====================================================
        // START APP
        // =====================================================

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
